)]}'
{"version":3,"file":"/packages/accounts-ui-bootstrap-3.js","sources":["accounts-ui-bootstrap-3/accounts_ui.js","accounts-ui-bootstrap-3/login_buttons.html","accounts-ui-bootstrap-3/login_buttons_single.html","accounts-ui-bootstrap-3/login_buttons_dropdown.html","accounts-ui-bootstrap-3/login_buttons_dialogs.html","accounts-ui-bootstrap-3/login_buttons_session.js","accounts-ui-bootstrap-3/login_buttons.js","accounts-ui-bootstrap-3/login_buttons_single.js","accounts-ui-bootstrap-3/login_buttons_dropdown.js","accounts-ui-bootstrap-3/login_buttons_dialogs.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,iB;AACA,kB;;AAEA,4B;AACA,yB;AACA,yB;AACA,uB;AACA,G;AACA,C;;AAEA,+C;AACA,4B;AACA,+C;AACA,yB;AACA,E;AACA,C;;AAEA,wC;AACA,yB;AACA,6G;AACA,wC;AACA,mC;AACA,8D;AACA,I;;AAEA,oC;AACA,oC;AACA,kB;AACA,gC;AACA,wB;AACA,iC;AACA,mB;AACA,e;AACA,qC;AACA,iD;AACA,2F;AACA,O;AACA,6E;AACA,U;AACA,qH;AACA,G;AACA,E;;AAEA,kC;AACA,kC;AACA,+D;AACA,0D;AACA,wG;AACA,0C;AACA,2F;AACA,W;AACA,6D;AACA,I;AACA,K;AACA,qG;AACA,gF;AACA,U;AACA,mC;AACA,8D;AACA,+C;AACA,4H;AACA,8C;AACA,2B;AACA,2D;AACA,O;AACA,I;AACA,G;AACA,E;AACA,E;;AAEA,gD;AACA,kE;AACA,E;;;;;;;;;;;;;;;;;;;;ACvEA,kD;AACA,kB;AACA,sB;AACA,2B;AACA,sD;AACA,0B;AACA,oB;AACA,uC;AACA,sD;AACA,4B;AACA,sB;AACA,+C;AACA,uD;AACA,8B;AACA,wB;AACA,uG;AACA,+B;AACA,wB;AACA,qC;AACA,uD;AACA,8H;AACA,oB;AACA,6B;AACA,sB;AACA,kG;AACA,iB;AACA,2B;AACA,oB;AACA,+F;AACA,M;AACA,I;;AAEA,0D;AACA,kB;AACA,sB;AACA,2B;AACA,mD;AACA,0B;AACA,oB;AACA,sG;AACA,2B;AACA,oB;AACA,+G;AACA,M;AACA,I;;AAEA,2D;AACA,kB;AACA,sB;AACA,2B;AACA,mD;AACA,0B;AACA,oB;AACA,wC;AACA,gE;AACA,4B;AACA,sB;AACA,0C;AACA,uD;AACA,8B;AACA,wB;AACA,gH;AACA,+B;AACA,wB;AACA,sD;AACA,8D;AACA,gC;AACA,0B;AACA,kD;AACA,4D;AACA,kC;AACA,4B;AACA,kI;AACA,mC;AACA,4B;AACA,kI;AACA,0B;AACA,uB;AACA,oB;AACA,iB;AACA,2B;AACA,oB;AACA,+B;AACA,4B;AACA,gD;AACA,M;AACA,I;;AAEA,0D;AACA,kB;AACA,sB;AACA,6B;AACA,uD;AACA,0B;AACA,oB;AACA,+B;AACA,mC;AACA,mB;AACA,6D;AACA,gB;AACA,gC;AACA,sD;AACA,0B;AACA,oB;AACA,+B;AACA,8C;AACA,mB;AACA,4D;AACA,gB;AACA,Q;AACA,I;;AAEA,2D;AACA,kB;AACA,sB;AACA,mN;AACA,I;;AAEA,kE;AACA,kB;AACA,sB;AACA,+B;AACA,mD;AACA,0B;AACA,oB;AACA,mC;AACA,sC;AACA,0B;AACA,kD;AACA,mC;AACA,gC;AACA,qB;AACA,qB;AACA,c;AACA,0B;AACA,2B;AACA,oB;AACA,mC;AACA,sC;AACA,gB;AACA,M;AACA,I;;;;;;;;;;;;;;;;;;;;AC7IA,4E;AACA,kB;AACA,sB;AACA,2B;AACA,qD;AACA,0B;AACA,oB;AACA,kC;AACA,gE;AACA,kE;AACA,S;AACA,oC;AACA,gE;AACA,gB;AACA,2B;AACA,oB;AACA,kC;AACA,uE;AACA,iC;AACA,gE;AACA,0B;AACA,M;AACA,I;;AAEA,4E;AACA,kB;AACA,sB;AACA,mB;AACA,oC;AACA,sF;AACA,I;;AAEA,4E;AACA,kB;AACA,sB;AACA,iC;AACA,c;AACA,8B;AACA,iB;AACA,0D;AACA,0B;AACA,I;;;;;;;;;;;;;;;;;;;;ACzCA,kE;AACA,kB;AACA,sB;AACA,kB;AACA,8B;AACA,uB;AACA,qB;AACA,+B;AACA,6B;AACA,0B;AACA,0D;AACA,wB;AACA,qB;AACA,qE;AACA,M;AACA,kB;AACA,4B;AACA,Y;AACA,qE;AACA,qC;AACA,gC;AACA,4D;AACA,0B;AACA,oB;AACA,kG;AACA,2B;AACA,oB;AACA,yC;AACA,iE;AACA,4B;AACA,sB;AACA,4G;AACA,6B;AACA,sB;AACA,qH;AACA,mB;AACA,uB;AACA,I;;AAEA,yE;AACA,kB;AACA,sB;AACA,6B;AACA,4E;AACA,0B;AACA,oB;AACA,uH;AACA,kC;AACA,gE;AACA,0B;AACA,oB;AACA,kC;AACA,2C;AACA,8C;AACA,mC;AACA,gH;AACA,I;;AAEA,mE;AACA,kB;AACA,sB;AACA,kB;AACA,8B;AACA,uB;AACA,qB;AACA,+B;AACA,6B;AACA,sC;AACA,sE;AACA,0B;AACA,oB;AACA,mB;AACA,6D;AACA,4B;AACA,2G;AACA,I;;AAEA,sE;AACA,kB;AACA,sB;AACA,6B;AACA,mD;AACA,0B;AACA,oB;AACA,0C;AACA,+D;AACA,4B;AACA,sB;AACA,gG;AACA,mC;AACA,8D;AACA,4B;AACA,sB;AACA,0C;AACA,+D;AACA,8B;AACA,wB;AACA,gI;AACA,8G;AACA,6B;AACA,sB;AACA,oH;AACA,iB;AACA,M;AACA,I;;AAEA,mF;AACA,kB;AACA,sB;AACA,wQ;AACA,I;;AAEA,0E;AACA,kB;AACA,sB;AACA,2B;AACA,+D;AACA,0B;AACA,oB;AACA,4F;AACA,2B;AACA,oB;AACA,kH;AACA,mD;AACA,4B;AACA,sB;AACA,mG;AACA,8B;AACA,2C;AACA,mC;AACA,oB;AACA,kC;AACA,yD;AACA,4B;AACA,sB;AACA,iC;AACA,6B;AACA,sB;AACA,kC;AACA,4C;AACA,wD;AACA,4B;AACA,sB;AACA,kC;AACA,iC;AACA,oC;AACA,qE;AACA,8B;AACA,wB;AACA,mC;AACA,qC;AACA,8B;AACA,0C;AACA,sC;AACA,oE;AACA,8B;AACA,wB;AACA,mC;AACA,4B;AACA,+B;AACA,wC;AACA,8B;AACA,mC;AACA,yD;AACA,4B;AACA,sB;AACA,yG;AACA,iB;AACA,M;AACA,I;;AAEA,wD;AACA,kB;AACA,sB;AACA,mB;AACA,yB;AACA,6c;AACA,I;;AAEA,iE;AACA,kB;AACA,sB;AACA,uG;AACA,I;;AAEA,2D;AACA,kB;AACA,sB;AACA,2B;AACA,kD;AACA,0B;AACA,oB;AACA,iC;AACA,kC;AACA,4D;AACA,U;AACA,wB;AACA,4D;AACA,Q;AACA,+B;AACA,6D;AACA,Q;AACA,6B;AACA,gB;AACA,M;AACA,I;;AAEA,gE;AACA,kB;AACA,sB;AACA,uG;AACA,iD;AACA,0B;AACA,oB;AACA,+F;AACA,mN;AACA,I;;;;;;;;;;;;;;;;;;;;ACxNA,oE;AACA,kB;AACA,6d;AACA,M;AACA,wJ;;AAEA,yD;AACA,kB;AACA,sB;AACA,2B;AACA,8D;AACA,0B;AACA,oB;AACA,+B;AACA,uB;AACA,8C;AACA,0B;AACA,6B;AACA,2B;AACA,8B;AACA,4B;AACA,6B;AACA,gC;AACA,qB;AACA,uB;AACA,8B;AACA,2B;AACA,qB;AACA,sB;AACA,c;AACA,8B;AACA,4B;AACA,gE;AACA,2B;AACA,+B;AACA,wC;AACA,8B;AACA,uB;AACA,iC;AACA,sH;AACA,6B;AACA,2B;AACA,iC;AACA,+C;AACA,0C;AACA,iC;AACA,+C;AACA,0L;AACA,M;AACA,I;;AAEA,yD;AACA,kB;AACA,sB;AACA,2B;AACA,8D;AACA,0B;AACA,oB;AACA,+B;AACA,uB;AACA,8C;AACA,0B;AACA,6B;AACA,2B;AACA,8B;AACA,4B;AACA,6B;AACA,gC;AACA,qB;AACA,uB;AACA,8B;AACA,2B;AACA,qB;AACA,sB;AACA,c;AACA,8B;AACA,4B;AACA,8D;AACA,2B;AACA,+B;AACA,oC;AACA,8B;AACA,uB;AACA,iC;AACA,sH;AACA,6B;AACA,2B;AACA,iC;AACA,sD;AACA,0C;AACA,iC;AACA,+C;AACA,0L;AACA,M;AACA,I;;AAEA,6D;AACA,kB;AACA,sB;AACA,2B;AACA,kD;AACA,0B;AACA,oB;AACA,+B;AACA,yD;AACA,6C;AACA,8B;AACA,wC;AACA,oC;AACA,M;AACA,I;;AAEA,iE;AACA,kB;AACA,sB;AACA,2B;AACA,kD;AACA,0B;AACA,oB;AACA,8B;AACA,uB;AACA,gD;AACA,0B;AACA,6B;AACA,4B;AACA,8B;AACA,8B;AACA,6B;AACA,+B;AACA,4B;AACA,kE;AACA,2B;AACA,gC;AACA,2C;AACA,yD;AACA,6R;AACA,gB;AACA,qC;AACA,uC;AACA,gB;AACA,qC;AACA,mE;AACA,gE;AACA,4B;AACA,sB;AACA,0G;AACA,gE;AACA,6D;AACA,W;AACA,qB;AACA,wD;AACA,gG;AACA,6D;AACA,6D;AACA,Y;AACA,oB;AACA,wE;AACA,kG;AACA,yC;AACA,gC;AACA,mF;AACA,+E;AACA,2F;AACA,2D;AACA,8B;AACA,wB;AACA,uC;AACA,Y;AACA,6D;AACA,0G;AACA,M;AACA,I;;AAEA,gE;AACA,kB;AACA,sB;AACA,2B;AACA,kD;AACA,0B;AACA,oB;AACA,+B;AACA,0D;AACA,wC;AACA,oG;AACA,8B;AACA,0C;AACA,oC;AACA,M;AACA,I;;;;;;;;;;;;;;;;;;;AC7LA,c;AACA,mB;AACA,oB;;AAEA,2E;AACA,iB;AACA,yB;AACA,yB;AACA,sB;;AAEA,iB;AACA,gB;;AAEA,2C;AACA,uB;AACA,uB;AACA,sB;;AAEA,uC;AACA,2C;AACA,2C;AACA,G;;AAEA,mC;AACA,mC;AACA,iE;AACA,G;;AAEA,yC;;AAEA,mF;AACA,kC;AACA,6B;AACA,oB;AACA,wD;AACA,qH;;AAEA,yB;AACA,I;;AAEA,8B;AACA,wC;AACA,I;;AAEA,sB;AACA,oB;AACA,wC;AACA,I;;AAEA,8B;AACA,mC;AACA,2C;AACA,2C;AACA,wC;AACA,sC;AACA,wB;AACA,I;;AAEA,kC;AACA,mC;AACA,qC;AACA,+B;AACA,I;;AAEA,mC;AACA,sC;AACA,kC;AACA,+B;AACA,I;;AAEA,mE;AACA,uC;AACA,2C;AACA,qC;AACA,kC;AACA,I;;AAEA,mE;AACA,6D;AACA,iC;AACA,I;AACA,oE;AACA,yD;AACA,oE;AACA,e;AACA,qC;AACA,sC;AACA,sC;AACA,I;;AAEA,8B;AACA,mC;AACA,kC;AACA,I;;AAEA,qC;AACA,wD;AACA,4D;AACA,6D;AACA,yB;AACA,uD;AACA,U;AACA,G;AACA,G;AACA,M;;;;;;;;;;;;;;;;;;;ACxGA,a;AACA,6B;AACA,8B;;AAEA,mB;AACA,yD;;AAEA,gD;AACA,gC;AACA,I;;AAEA,2C;AACA,gC;AACA,6C;AACA,6B;AACA,wC;AACA,M;AACA,G;AACA,I;;AAEA,G;AACA,iC;AACA,G;;AAEA,wD;AACA,2C;AACA,G;;AAEA,wD;AACA,mD;AACA,G;;AAEA,6D;AACA,2D;AACA,4B;AACA,mB;AACA,kF;AACA,qB;AACA,G;;AAEA,mE;AACA,4C;AACA,G;;;AAGA,G;AACA,iC;AACA,G;;AAEA,iE;AACA,W;AACA,uD;AACA,2C;AACA,G;;AAEA,0D;AACA,8C;AACA,G;;;;AAIA,G;AACA,gC;AACA,G;;AAEA,2D;AACA,iD;AACA,G;;AAEA,0D;AACA,gD;AACA,G;;AAEA,G;AACA,yC;AACA,G;;AAEA,+D;AACA,2C;AACA,G;;AAEA,G;AACA,W;AACA,G;;AAEA,kD;AACA,2B;AACA,Y;AACA,a;;AAEA,wC;AACA,4B;AACA,oB;AACA,wB;AACA,8D;AACA,iC;;AAEA,Y;AACA,G;;AAEA,uD;AACA,mC;AACA,gF;;AAEA,+D;AACA,wD;AACA,mB;AACA,kB;;AAEA,oD;AACA,gC;AACA,6B;;AAEA,yC;AACA,W;AACA,c;AACA,K;AACA,K;AACA,G;;AAEA,yD;AACA,wC;AACA,G;;AAEA,+C;AACA,2F;AACA,G;;AAEA,mE;AACA,G;AACA,gE;AACA,uB;AACA,+D;AACA,6B;AACA,e;AACA,U;AACA,mF;AACA,gB;AACA,G;AACA,G;AACA,yD;AACA,4F;AACA,e;;AAEA,uK;;AAEA,uB;AACA,e;AACA,U;AACA,qD;AACA,gB;AACA,G;AACA,G;AACA,+D;AACA,6B;AACA,e;AACA,U;AACA,mF;AACA,gB;AACA,G;AACA,G;;AAEA,gD;AACA,W;AACA,G;;AAEA,K;;;;;;;;;;;;;;;;;;;ACtKA,c;AACA,mB;AACA,yD;;AAEA,0D;AACA,sC;AACA,+B;AACA,uC;AACA,kC;AACA,e;AACA,yC;AACA,6D;AACA,kB;AACA,qD;AACA,uD;AACA,Y;AACA,qE;AACA,K;AACA,K;;AAEA,wE;;AAEA,0D;AACA,4D;AACA,sF;;AAEA,uC;AACA,G;AACA,I;;AAEA,4E;AACA,4E;AACA,G;;AAEA,iF;AACA,6B;AACA,wE;AACA,mB;AACA,M;AACA,gC;AACA,G;;AAEA,+E;AACA,gC;AACA,uC;AACA,oD;AACA,G;AACA,M;;;;;;;;;;;;;;;;;;AC/CA,a;;AAEA,mB;AACA,yD;;AAEA,2D;AACA,gC;AACA,gC;AACA,4B;AACA,2B;AACA,I;AACA,mE;AACA,2B;AACA,oD;AACA,kB;AACA,I;AACA,oC;AACA,uC;AACA,G;AACA,I;;AAEA,qD;AACA,mB;AACA,G;;AAEA,G;AACA,qD;AACA,G;;AAEA,gD;AACA,gE;AACA,2B;AACA,uC;AACA,yD;AACA,kB;AACA,G;AACA,I;;AAEA,kE;AACA,8C;AACA,G;;AAEA,2E;AACA,yD;AACA,G;;AAEA,wE;AACA,sD;AACA,G;;AAEA,sE;AACA,oD;AACA,G;;AAEA,mF;AACA,2E;AACA,4E;AACA,kF;AACA,I;AACA,2E;AACA,2B;AACA,oF;AACA,G;;;AAGA,gG;AACA,gF;AACA,G;;AAEA,G;AACA,sD;AACA,G;;AAEA,iD;AACA,+C;AACA,2B;AACA,mB;AACA,I;;AAEA,sD;AACA,2B;AACA,4B;AACA,qB;AACA,I;;AAEA,2D;AACA,2B;AACA,oB;AACA,I;;AAEA,yC;AACA,2B;AACA,uC;;AAEA,gE;AACA,4D;AACA,sD;AACA,4E;AACA,yE;AACA,qD;;AAEA,iD;AACA,0D;;AAEA,6E;AACA,kB;;AAEA,iD;AACA,yB;AACA,+D;AACA,2B;AACA,yD;AACA,qC;AACA,4C;AACA,uE;AACA,Q;AACA,oE;AACA,I;AACA,kD;AACA,2B;AACA,uC;;AAEA,gE;AACA,sD;AACA,4E;;AAEA,kD;AACA,yD;;AAEA,6E;AACA,kB;AACA,sB;;AAEA,iD;AACA,sB;AACA,mE;AACA,qC;AACA,4C;AACA,8E;AACA,I;AACA,2C;AACA,2B;AACA,uC;;AAEA,4D;AACA,yI;;AAEA,kD;AACA,0D;;AAEA,6E;AACA,kB;;AAEA,iD;AACA,+D;AACA,8C;AACA,yD;AACA,yE;AACA,0D;AACA,iF;AACA,I;AACA,mK;AACA,4B;AACA,oB;AACA,G;AACA,I;;AAEA,kE;AACA,yE;AACA,2B;AACA,gB;AACA,U;AACA,iD;AACA,uC;AACA,gE;AACA,wC;AACA,W;AACA,gC;AACA,I;AACA,G;AACA,G;;AAEA,uE;AACA,oD;AACA,G;;AAEA,0E;AACA,qD;AACA,G;;AAEA,mF;AACA,uD;AACA,G;;AAEA,mE;AACA,mD;AACA,G;;AAEA,4E;AACA,kC;AACA,G;;AAEA,2E;AACA,8D;AACA,G;;AAEA,6E;AACA,qD;AACA,G;;AAEA,qE;AACA,sB;AACA,kC;AACA,mC;AACA,wB;AACA,sB;AACA,yF;AACA,0C;AACA,I;AACA,M;AACA,yB;AACA,0B;AACA,wB;AACA,mE;AACA,I;AACA,M;AACA,sB;AACA,uB;AACA,sB;AACA,wB;AACA,gE;AACA,I;AACA,M;AACA,yB;AACA,0B;AACA,yB;AACA,wB;AACA,gB;AACA,I;AACA,K;;AAEA,uB;AACA,yB;AACA,0B;AACA,wB;AACA,sB;AACA,0G;AACA,0C;AACA,I;AACA,M;AACA,sB;AACA,uB;AACA,sB;AACA,wB;AACA,sB;AACA,wE;AACA,0C;AACA,I;AACA,M;AACA,sB;AACA,kC;AACA,sB;AACA,wB;AACA,iF;AACA,I;AACA,M;AACA,yB;AACA,0B;AACA,yB;AACA,wB;AACA,gB;AACA,I;AACA,M;AACA,+B;AACA,kC;AACA,yB;AACA,wB;AACA,2D;AACA,gE;AACA,kC;AACA,sB;AACA,oF;AACA,0C;AACA,I;AACA,K;;AAEA,6E;;AAEA,8E;AACA,G;;AAEA,mF;AACA,yD;AACA,G;;AAEA,0E;AACA,sG;AACA,G;;AAEA,2E;AACA,iD;AACA,G;;AAEA,qF;AACA,oB;AACA,qG;AACA,wC;AACA,G;;AAEA,oF;AACA,wD;AACA,G;;AAEA,yD;AACA,kC;AACA,G;;;AAGA,G;AACA,uC;AACA,G;AACA,8C;AACA,6G;AACA,4B;AACA,qB;AACA,I;AACA,8D;AACA,2B;AACA,oB;AACA,I;AACA,kE;AACA,2B;AACA,uC;AACA,oE;AACA,kB;AACA,G;AACA,I;;AAEA,2D;AACA,W;AACA,6B;AACA,kC;AACA,yB;AACA,wB;AACA,gB;AACA,I;AACA,M;AACA,yB;AACA,8B;AACA,yB;AACA,wB;AACA,gB;AACA,I;AACA,M;AACA,+B;AACA,sC;AACA,yB;AACA,wB;AACA,2D;AACA,gE;AACA,kC;AACA,sB;AACA,sD;AACA,0C;AACA,I;AACA,K;AACA,G;;;AAGA,G;AACA,W;AACA,G;;AAEA,sC;AACA,4C;AACA,e;AACA,e;AACA,M;AACA,wB;AACA,G;;AAEA,6C;AACA,4C;AACA,e;AACA,e;AACA,M;AACA,2D;AACA,G;;AAEA,iC;AACA,8C;AACA,Y;AACA,M;AACA,W;AACA,G;;AAEA,yB;AACA,sC;;AAEA,2D;AACA,qD;AACA,2E;AACA,wE;AACA,oD;;AAEA,oB;AACA,0B;AACA,0D;AACA,W;AACA,O;AACA,qB;AACA,uB;AACA,M;AACA,8B;AACA,oD;AACA,W;AACA,O;AACA,qB;AACA,iB;AACA,M;AACA,wC;AACA,qF;AACA,4D;AACA,iE;AACA,W;AACA,O;AACA,oC;AACA,U;AACA,+E;AACA,G;;AAEA,6E;AACA,e;AACA,sE;AACA,W;AACA,wC;AACA,I;AACA,K;AACA,G;;AAEA,kC;AACA,8D;AACA,G;;AAEA,0B;AACA,sC;;AAEA,0D;;AAEA,2D;AACA,0B;AACA,0D;AACA,W;AACA,O;AACA,gC;AACA,G;;AAEA,qD;AACA,uB;AACA,oD;AACA,W;AACA,O;AACA,0B;AACA,G;;AAEA,wE;AACA,oD;AACA,yD;AACA,U;AACA,M;AACA,+B;;AAEA,qC;AACA,U;;AAEA,+B;AACA,uB;;AAEA,0E;AACA,wC;AACA,4D;AACA,I;;AAEA,uC;;AAEA,+D;AACA,yE;AACA,4D;AACA,8C;AACA,yC;AACA,qF;AACA,Y;AACA,qC;AACA,K;AACA,W;AACA,oF;AACA,I;AACA,K;;AAEA,+B;AACA,U;;AAEA,gD;AACA,e;AACA,sE;AACA,W;AACA,wC;AACA,I;AACA,K;AACA,G;;AAEA,kC;AACA,sC;;AAEA,+D;AACA,kC;AACA,4B;AACA,gB;AACA,uB;AACA,c;AACA,uE;AACA,Q;AACA,mD;AACA,M;AACA,U;AACA,iD;AACA,G;AACA,G;;AAEA,kC;AACA,sC;;AAEA,wE;AACA,2D;;AAEA,wE;AACA,oD;AACA,yD;AACA,U;;AAEA,qC;AACA,U;;AAEA,kE;AACA,e;AACA,sE;AACA,W;AACA,wD;;AAEA,0C;AACA,kC;AACA,yC;AACA,a;AACA,I;AACA,K;AACA,G;;AAEA,+C;AACA,wE;AACA,+D;AACA,+B;AACA,yE;AACA,qD;AACA,oC;AACA,8D;AACA,iB;AACA,I;AACA,G;AACA,c;AACA,G;AACA,K;;;;;;;;;;;;;;;;;;;AC1jBA,c;AACA,mB;AACA,yD;;;AAGA,G;AACA,4D;AACA,qE;AACA,oE;AACA,+C;AACA,G;;AAEA,oC;AACA,8E;AACA,E;;AAEA,oC;AACA,8E;AACA,E;;AAEA,oE;AACA,oE;AACA,kE;AACA,6B;AACA,mC;AACA,qE;AACA,gC;AACA,e;AACA,wD;AACA,gD;AACA,M;AACA,G;AACA,I;;;AAGA,G;AACA,gC;AACA,G;AACA,sD;AACA,mE;AACA,iB;AACA,E;;AAEA,uC;AACA,kE;AACA,2B;AACA,mB;AACA,I;AACA,6D;AACA,4B;AACA,oB;AACA,I;AACA,kE;AACA,2B;AACA,uD;AACA,+B;AACA,0D;AACA,G;AACA,I;;AAEA,kC;AACA,sC;AACA,iF;AACA,4D;AACA,U;;AAEA,yB;AACA,8D;AACA,qB;AACA,gB;AACA,uE;AACA,Y;AACA,yD;AACA,iC;AACA,4D;AACA,K;AACA,M;AACA,G;;AAEA,kE;AACA,uD;AACA,G;;;AAGA,G;AACA,gC;AACA,G;;AAEA,uC;AACA,6D;AACA,mB;AACA,I;AACA,yD;AACA,4B;AACA,oB;AACA,I;AACA,oE;AACA,uD;AACA,+B;AACA,wB;AACA,G;AACA,I;;AAEA,sD;AACA,+D;AACA,iB;AACA,G;;AAEA,kC;AACA,sC;AACA,0E;AACA,yD;AACA,U;;AAEA,yB;AACA,2D;AACA,qB;AACA,gB;AACA,uE;AACA,Y;AACA,yD;AACA,iC;AACA,0B;AACA,K;AACA,M;AACA,G;;AAEA,kE;AACA,uD;AACA,G;;;AAGA,G;AACA,oC;AACA,G;;AAEA,2C;AACA,sD;AACA,uD;AACA,G;AACA,I;;AAEA,0D;AACA,sD;AACA,G;;;AAGA,G;AACA,uC;AACA,G;;AAEA,gE;AACA,yE;AACA,qB;AACA,K;;AAEA,8C;AACA,wD;AACA,uC;AACA,G;AACA,I;;AAEA,6D;AACA,qG;AACA,0D;AACA,G;;;AAGA,G;AACA,wC;AACA,G;;AAEA,+C;AACA,gE;AACA,2B;AACA,wE;AACA,4D;AACA,I;AACA,2E;AACA,uE;AACA,4E;AACA,gE;AACA,wF;AACA,yB;AACA,yB;AACA,M;AACA,mD;AACA,6D;AACA,+D;AACA,0C;AACA,O;;AAEA,mC;AACA,kF;AACA,e;AACA,6E;AACA,S;AACA,2E;AACA,+D;AACA,O;AACA,I;AACA,I;AACA,6E;AACA,6E;AACA,wE;AACA,0C;AACA,kE;AACA,oE;AACA,uE;AACA,yB;AACA,G;AACA,I;;AAEA,oE;AACA,8D;AACA,6D;AACA,uC;AACA,oE;AACA,kC;AACA,qE;AACA,K;;AAEA,oF;AACA,G;;AAEA,kE;AACA,uD;AACA,kE;AACA,sF;AACA,8E;AACA,G;;AAEA,wC;AACA,iE;AACA,2B;AACA,G;;AAEA,0E;AACA,+B;AACA,G;;AAEA,8D;AACA,uE;AACA,G;;AAEA,yE;AACA,qC;AACA,yD;AACA,G;;AAEA,mE;AACA,4E;AACA,G;;;AAGA,+E;AACA,gC;AACA,uC;AACA,oD;AACA,G;;AAEA,M","sourcesContent":["if (!Accounts.ui)\n\tAccounts.ui = {};\n\nif (!Accounts.ui._options) {\n\tAccounts.ui._options = {\n\t\trequestPermissions: {},\n\t\textraSignupFields: []\n\t};\n}\n\nAccounts.ui.navigate = function (route, hash) {\n\t// if router is iron-router\n\tif(window.Router && _.isFunction(Router.go)) {\n\t\tRouter.go(route, hash);\n\t}\n}\n\nAccounts.ui.config = function(options) {\n\t// validate options keys\n\tvar VALID_KEYS = ['passwordSignupFields', 'requestPermissions', 'extraSignupFields', 'requestOfflineToken'];\n\t_.each(_.keys(options), function(key) {\n\t\tif (!_.contains(VALID_KEYS, key))\n\t\t\tthrow new Error(\"Accounts.ui.config: Invalid key: \" + key);\n\t});\n\n\t// deal with `passwordSignupFields`\n\tif (options.passwordSignupFields) {\n\t\tif (_.contains([\n\t\t\t\"USERNAME_AND_EMAIL_CONFIRM\",\n\t\t\t\"USERNAME_AND_EMAIL\",\n\t\t\t\"USERNAME_AND_OPTIONAL_EMAIL\",\n\t\t\t\"USERNAME_ONLY\",\n\t\t\t\"EMAIL_ONLY\"\n\t\t], options.passwordSignupFields)) {\n\t\t\tif (Accounts.ui._options.passwordSignupFields)\n\t\t\t\tthrow new Error(\"Accounts.ui.config: Can't set `passwordSignupFields` more than once\");\n\t\t\telse\n\t\t\t\tAccounts.ui._options.passwordSignupFields = options.passwordSignupFields;\n\t\t} else {\n\t\t\tthrow new Error(\"Accounts.ui.config: Invalid option for `passwordSignupFields`: \" + options.passwordSignupFields);\n\t\t}\n\t}\n\n\t// deal with `requestPermissions`\n\tif (options.requestPermissions) {\n\t\t_.each(options.requestPermissions, function(scope, service) {\n\t\t\tif (Accounts.ui._options.requestPermissions[service]) {\n\t\t\t\tthrow new Error(\"Accounts.ui.config: Can't set `requestPermissions` more than once for \" + service);\n\t\t\t} else if (!(scope instanceof Array)) {\n\t\t\t\tthrow new Error(\"Accounts.ui.config: Value for `requestPermissions` must be an array\");\n\t\t\t} else {\n\t\t\t\tAccounts.ui._options.requestPermissions[service] = scope;\n\t\t\t}\n\t\t});\n\t\tif (typeof options.extraSignupFields !== 'object' || !options.extraSignupFields instanceof Array) {\n\t\t\tthrow new Error(\"Accounts.ui.config: `extraSignupFields` must be an array.\");\n\t\t} else {\n\t\t\tif (options.extraSignupFields) {\n\t\t\t\t_.each(options.extraSignupFields, function(field, index) {\n\t\t\t\t\tif (!field.fieldName || !field.fieldLabel)\n\t\t\t\t\t\tthrow new Error(\"Accounts.ui.config: `extraSignupFields` objects must have `fieldName` and `fieldLabel` attributes.\");\n\t\t\t\t\tif (typeof field.visible === 'undefined')\n\t\t\t\t\t\tfield.visible = true;\n\t\t\t\t\tAccounts.ui._options.extraSignupFields[index] = field;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n};\n\nAccounts.ui._passwordSignupFields = function() {\n\treturn Accounts.ui._options.passwordSignupFields || \"EMAIL_ONLY\";\n};\n","\nTemplate.__define__(\"_loginButtons\", (function() {\n  var self = this;\n  var template = this;\n  return UI.If(function() {\n    return Spacebars.call(self.lookup(\"currentUser\"));\n  }, UI.block(function() {\n    var self = this;\n    return [ \"\\n\t\t\", UI.If(function() {\n      return Spacebars.call(self.lookup(\"loggingIn\"));\n    }, UI.block(function() {\n      var self = this;\n      return [ \"\\n\t\t\t\\n\t\t\t\", UI.If(function() {\n        return Spacebars.call(self.lookup(\"dropdown\"));\n      }, UI.block(function() {\n        var self = this;\n        return [ \"\\n\t\t\t\t\", Spacebars.include(self.lookupTemplate(\"_loginButtonsLoggingIn\")), \"\\n\t\t\t\" ];\n      }), UI.block(function() {\n        var self = this;\n        return [ \"\\n\t\t\t\t\", HTML.DIV({\n          \"class\": \"login-buttons-with-only-one-button\"\n        }, \"\\n\t\t\t\t\t\", Spacebars.include(self.lookupTemplate(\"_loginButtonsLoggingInSingleLoginButton\")), \"\\n\t\t\t\t\"), \"\\n\t\t\t\" ];\n      })), \"\\n\t\t\" ];\n    }), UI.block(function() {\n      var self = this;\n      return [ \"\\n\t\t\t\", Spacebars.include(self.lookupTemplate(\"_loginButtonsLoggedIn\")), \"\\n\t\t\" ];\n    })), \"\\n\t\" ];\n  }), UI.block(function() {\n    var self = this;\n    return [ \"\\n\t\t\", Spacebars.include(self.lookupTemplate(\"_loginButtonsLoggedOut\")), \"\\n\t\" ];\n  }));\n}));\n\nTemplate.__define__(\"_loginButtonsLoggedIn\", (function() {\n  var self = this;\n  var template = this;\n  return UI.If(function() {\n    return Spacebars.call(self.lookup(\"dropdown\"));\n  }, UI.block(function() {\n    var self = this;\n    return [ \"\\n\t\t\", Spacebars.include(self.lookupTemplate(\"_loginButtonsLoggedInDropdown\")), \"\\n\t\" ];\n  }), UI.block(function() {\n    var self = this;\n    return [ \"\\n\t\", Spacebars.include(self.lookupTemplate(\"_loginButtonsLoggedInSingleLogoutButton\")), \"\\n\t\" ];\n  }));\n}));\n\nTemplate.__define__(\"_loginButtonsLoggedOut\", (function() {\n  var self = this;\n  var template = this;\n  return UI.If(function() {\n    return Spacebars.call(self.lookup(\"services\"));\n  }, UI.block(function() {\n    var self = this;\n    return [ \" \\n\t\t\", UI.If(function() {\n      return Spacebars.call(self.lookup(\"configurationLoaded\"));\n    }, UI.block(function() {\n      var self = this;\n      return [ \"\\n\t\t\t\", UI.If(function() {\n        return Spacebars.call(self.lookup(\"dropdown\"));\n      }, UI.block(function() {\n        var self = this;\n        return [ \" \\n\t\t\t\t\", Spacebars.include(self.lookupTemplate(\"_loginButtonsLoggedOutDropdown\")), \"\\n\t\t\t\" ];\n      }), UI.block(function() {\n        var self = this;\n        return [ \"\\n\t\t\t\t\", Spacebars.With(function() {\n          return Spacebars.call(self.lookup(\"singleService\"));\n        }, UI.block(function() {\n          var self = this;\n          return [ \" \\n\t\t\t\t\t\t\", UI.If(function() {\n            return Spacebars.call(self.lookup(\"loggingIn\"));\n          }, UI.block(function() {\n            var self = this;\n            return [ \"\\n\t\t\t\t\t\t\t\", Spacebars.include(self.lookupTemplate(\"_loginButtonsLoggingInSingleLoginButton\")), \"\\n\t\t\t\t\t\t\" ];\n          }), UI.block(function() {\n            var self = this;\n            return [ \"\\n\t\t\t\t\t\t\t\", Spacebars.include(self.lookupTemplate(\"_loginButtonsLoggedOutSingleLoginButton\")), \"\\n\t\t\t\t\t\t\" ];\n          })), \"\\n\t\t\t\t\" ];\n        })), \"\\n\t\t\t\" ];\n      })), \"\\n\t\t\" ];\n    })), \"\\n\t\" ];\n  }), UI.block(function() {\n    var self = this;\n    return [ \"\\n\t\t\", HTML.DIV({\n      \"class\": \"no-services\"\n    }, \"No login services configured\"), \"\\n\t\" ];\n  }));\n}));\n\nTemplate.__define__(\"_loginButtonsMessages\", (function() {\n  var self = this;\n  var template = this;\n  return [ UI.If(function() {\n    return Spacebars.call(self.lookup(\"errorMessage\"));\n  }, UI.block(function() {\n    var self = this;\n    return [ \"\\n\t\t\", HTML.DIV({\n      \"class\": \"alert alert-danger\"\n    }, function() {\n      return Spacebars.mustache(self.lookup(\"errorMessage\"));\n    }), \"\\n\t\" ];\n  })), \"\\n\t\", UI.If(function() {\n    return Spacebars.call(self.lookup(\"infoMessage\"));\n  }, UI.block(function() {\n    var self = this;\n    return [ \"\\n\t\t\", HTML.DIV({\n      \"class\": \"alert alert-success no-margin\"\n    }, function() {\n      return Spacebars.mustache(self.lookup(\"infoMessage\"));\n    }), \"\\n\t\" ];\n  })) ];\n}));\n\nTemplate.__define__(\"_loginButtonsLoggingIn\", (function() {\n  var self = this;\n  var template = this;\n  return [ Spacebars.include(self.lookupTemplate(\"_loginButtonsLoggingInPadding\")), HTML.Raw('\\n\t<div class=\"loading\">&nbsp;</div>\\n\t'), Spacebars.include(self.lookupTemplate(\"_loginButtonsLoggingInPadding\")) ];\n}));\n\nTemplate.__define__(\"_loginButtonsLoggingInPadding\", (function() {\n  var self = this;\n  var template = this;\n  return UI.Unless(function() {\n    return Spacebars.call(self.lookup(\"dropdown\"));\n  }, UI.block(function() {\n    var self = this;\n    return [ \"\\n\t\t\\n\t\t\", HTML.DIV({\n      \"class\": \"login-buttons-padding\"\n    }, \"\\n\t\t\t\", HTML.DIV({\n      \"class\": \"login-button single-login-button\",\n      style: \"visibility: hidden;\",\n      id: \"login-buttons-logout\"\n    }, HTML.CharRef({\n      html: \"&nbsp;\",\n      str: \" \"\n    })), \"\\n\t\t\"), \"\\n\t\" ];\n  }), UI.block(function() {\n    var self = this;\n    return [ \"\\n\t\t\\n\t\t\", HTML.DIV({\n      \"class\": \"login-buttons-padding\"\n    }), \"\\n\t\" ];\n  }));\n}));\n","\nTemplate.__define__(\"_loginButtonsLoggedOutSingleLoginButton\", (function() {\n  var self = this;\n  var template = this;\n  return UI.If(function() {\n    return Spacebars.call(self.lookup(\"configured\"));\n  }, UI.block(function() {\n    var self = this;\n    return [ \"\\n\t\t\", HTML.BUTTON({\n      \"class\": [ \"login-button btn btn-block btn-\", function() {\n        return Spacebars.mustache(self.lookup(\"capitalizedName\"));\n      } ]\n    }, \"sign in with \", function() {\n      return Spacebars.mustache(self.lookup(\"capitalizedName\"));\n    }), \"\\n\t\" ];\n  }), UI.block(function() {\n    var self = this;\n    return [ \"\\n\t\t\", HTML.BUTTON({\n      \"class\": \"login-button btn btn-block configure-button btn-danger\"\n    }, \"Configure \", function() {\n      return Spacebars.mustache(self.lookup(\"capitalizedName\"));\n    }, \" Login\"), \"\\n\t\" ];\n  }));\n}));\n\nTemplate.__define__(\"_loginButtonsLoggingInSingleLoginButton\", (function() {\n  var self = this;\n  var template = this;\n  return HTML.DIV({\n    \"class\": \"login-text-and-button\"\n  }, \"\\n\t\t\", Spacebars.include(self.lookupTemplate(\"_loginButtonsLoggingIn\")), \"\\n\t\");\n}));\n\nTemplate.__define__(\"_loginButtonsLoggedInSingleLogoutButton\", (function() {\n  var self = this;\n  var template = this;\n  return HTML.LI(\"\\n\t\t\", HTML.A({\n    href: \"#\",\n    id: \"login-buttons-logout\"\n  }, function() {\n    return Spacebars.mustache(self.lookup(\"displayName\"));\n  }, \" sign Out\"), \"\\n\t\");\n}));\n","\nTemplate.__define__(\"_loginButtonsLoggedInDropdown\", (function() {\n  var self = this;\n  var template = this;\n  return HTML.LI({\n    id: \"login-dropdown-list\",\n    \"class\": \"dropdown\"\n  }, \"\\n\t\t\", HTML.A({\n    \"class\": \"dropdown-toggle\",\n    \"data-toggle\": \"dropdown\"\n  }, \"\\n\t\t\t\", function() {\n    return Spacebars.mustache(self.lookup(\"displayName\"));\n  }, \"\\n\t\t\t\", HTML.IMG({\n    src: function() {\n      return Spacebars.mustache(self.lookup(\"user_profile_picture\"));\n    },\n    width: \"30px\",\n    \"class\": \"img-circular\",\n    alt: \"#\"\n  }), HTML.Raw('\\n\t\t\t<b class=\"caret\"></b>\\n\t\t')), \"\\n\t\t\", HTML.DIV({\n    \"class\": \"dropdown-menu col-sm-3\"\n  }, \"\\n\t\t\t\", UI.If(function() {\n    return Spacebars.call(self.lookup(\"inMessageOnlyFlow\"));\n  }, UI.block(function() {\n    var self = this;\n    return [ \"\\n\t\t\t\t\", Spacebars.include(self.lookupTemplate(\"_loginButtonsMessages\")), \"\\n\t\t\t\" ];\n  }), UI.block(function() {\n    var self = this;\n    return [ \"\\n\t\t\t\t\", UI.If(function() {\n      return Spacebars.call(self.lookup(\"inChangePasswordFlow\"));\n    }, UI.block(function() {\n      var self = this;\n      return [ \"\\n\t\t\t\t\t\", Spacebars.include(self.lookupTemplate(\"_loginButtonsChangePassword\")), \"\\n\t\t\t\t\" ];\n    }), UI.block(function() {\n      var self = this;\n      return [ \"\\n\t\t\t\t\t\", Spacebars.include(self.lookupTemplate(\"_loginButtonsLoggedInDropdownActions\")), \"\\n\t\t\t\t\" ];\n    })), \"\\n\t\t\t\" ];\n  })), \"\\n\t\t\"), \"\\n\t\");\n}));\n\nTemplate.__define__(\"_loginButtonsLoggedInDropdownActions\", (function() {\n  var self = this;\n  var template = this;\n  return [ UI.If(function() {\n    return Spacebars.call(self.lookup(\"additionalLoggedInDropdownActions\"));\n  }, UI.block(function() {\n    var self = this;\n    return [ \"\\n\t\t\", Spacebars.include(self.lookupTemplate(\"_loginButtonsAdditionalLoggedInDropdownActions\")), \"\\n\t\" ];\n  })), \"\\n\\n\t\", UI.If(function() {\n    return Spacebars.call(self.lookup(\"allowChangingPassword\"));\n  }, UI.block(function() {\n    var self = this;\n    return [ \"\\n\t\t\", HTML.BUTTON({\n      \"class\": \"btn btn-default btn-block\",\n      id: \"login-buttons-open-change-password\"\n    }, \"change password\"), \"\\n\t\" ];\n  })), HTML.Raw('\\n\\n\t<button class=\"btn btn-block btn-primary\" id=\"login-buttons-logout\">sign out</button>') ];\n}));\n\nTemplate.__define__(\"_loginButtonsLoggedOutDropdown\", (function() {\n  var self = this;\n  var template = this;\n  return HTML.LI({\n    id: \"login-dropdown-list\",\n    \"class\": \"dropdown\"\n  }, \"\\n\t\t\", HTML.A({\n    \"class\": \"dropdown-toggle\",\n    \"data-toggle\": \"dropdown\"\n  }, \"sign in\", UI.Unless(function() {\n    return Spacebars.call(self.lookup(\"forbidClientAccountCreation\"));\n  }, UI.block(function() {\n    var self = this;\n    return \" / up\";\n  })), HTML.Raw('<b class=\"caret\"></b>')), \"\\n\t\t\", HTML.DIV({\n    \"class\": \"dropdown-menu\"\n  }, \"\\n\t\t\t\", Spacebars.include(self.lookupTemplate(\"_loginButtonsLoggedOutAllServices\")), \"\\n\t\t\"), \"\\n\t\");\n}));\n\nTemplate.__define__(\"_loginButtonsLoggedOutAllServices\", (function() {\n  var self = this;\n  var template = this;\n  return UI.Each(function() {\n    return Spacebars.call(self.lookup(\"services\"));\n  }, UI.block(function() {\n    var self = this;\n    return [ \"\\n\t\", UI.Unless(function() {\n      return Spacebars.call(self.lookup(\"hasPasswordService\"));\n    }, UI.block(function() {\n      var self = this;\n      return [ \"\\n\t\t\", Spacebars.include(self.lookupTemplate(\"_loginButtonsMessages\")), \"\\n\t\" ];\n    })), \"\\n\t\t\", UI.If(function() {\n      return Spacebars.call(self.lookup(\"isPasswordService\"));\n    }, UI.block(function() {\n      var self = this;\n      return [ \"\\n\t\t\t\", UI.If(function() {\n        return Spacebars.call(self.lookup(\"hasOtherServices\"));\n      }, UI.block(function() {\n        var self = this;\n        return [ \" \\n\t\t\t\t\", Spacebars.include(self.lookupTemplate(\"_loginButtonsLoggedOutPasswordServiceSeparator\")), \"\\n\t\t\t\" ];\n      })), \"\\n\t\t\t\", Spacebars.include(self.lookupTemplate(\"_loginButtonsLoggedOutPasswordService\")), \"\\n\t\t\" ];\n    }), UI.block(function() {\n      var self = this;\n      return [ \"\\n\t\t\t\", Spacebars.include(self.lookupTemplate(\"_loginButtonsLoggedOutSingleLoginButton\")), \"\\n\t\t\" ];\n    })), \"\\n\t\" ];\n  }));\n}));\n\nTemplate.__define__(\"_loginButtonsLoggedOutPasswordServiceSeparator\", (function() {\n  var self = this;\n  var template = this;\n  return HTML.Raw('<div class=\"or\">\\n\t\t<span class=\"hline\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\\n\t\t<span class=\"or-text\">or</span>\\n\t\t<span class=\"hline\">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>\\n\t</div>');\n}));\n\nTemplate.__define__(\"_loginButtonsLoggedOutPasswordService\", (function() {\n  var self = this;\n  var template = this;\n  return UI.If(function() {\n    return Spacebars.call(self.lookup(\"inForgotPasswordFlow\"));\n  }, UI.block(function() {\n    var self = this;\n    return [ \"\\n\t\t\", Spacebars.include(self.lookupTemplate(\"_forgotPasswordForm\")), \"\\n\t\" ];\n  }), UI.block(function() {\n    var self = this;\n    return [ \"\\n\t\t\", Spacebars.include(self.lookupTemplate(\"_loginButtonsMessages\")), \"\\n\t\t\", UI.Each(function() {\n      return Spacebars.call(self.lookup(\"fields\"));\n    }, UI.block(function() {\n      var self = this;\n      return [ \"\\n\t\t\t\", Spacebars.include(self.lookupTemplate(\"_loginButtonsFormField\")), \"\\n\t\t\" ];\n    })), \"\\n\t\t\", HTML.BUTTON({\n      \"class\": \"btn btn-primary col-sm-12\",\n      id: \"login-buttons-password\",\n      type: \"button\"\n    }, \"\\n\t\t\t\", UI.If(function() {\n      return Spacebars.call(self.lookup(\"inSignupFlow\"));\n    }, UI.block(function() {\n      var self = this;\n      return \"\\n\t\t\t\tcreate\\n\t\t\t\";\n    }), UI.block(function() {\n      var self = this;\n      return \"\\n\t\t\t\tsign in\\n\t\t\t\";\n    })), \"\\n\t\t\"), \"\\n\t\t\", UI.If(function() {\n      return Spacebars.call(self.lookup(\"inLoginFlow\"));\n    }, UI.block(function() {\n      var self = this;\n      return [ \"\\n\t\t\t\", HTML.DIV({\n        id: \"login-other-options\"\n      }, \"\\n\t\t\t\", UI.If(function() {\n        return Spacebars.call(self.lookup(\"showForgotPasswordLink\"));\n      }, UI.block(function() {\n        var self = this;\n        return [ \"\\n\t\t\t\t\", HTML.A({\n          id: \"forgot-password-link\",\n          \"class\": \"pull-left\"\n        }, \"forgot password?\"), \"\\n\t\t\t\" ];\n      })), \"\\n\t\t\t\", UI.If(function() {\n        return Spacebars.call(self.lookup(\"showCreateAccountLink\"));\n      }, UI.block(function() {\n        var self = this;\n        return [ \"\\n\t\t\t\t\", HTML.A({\n          id: \"signup-link\",\n          \"class\": \"pull-right\"\n        }, \"create account\"), \"\\n\t\t\t\" ];\n      })), \"\\n\t\t\t\"), \"\\n\t\t\" ];\n    })), \"\\n\t\t\", UI.If(function() {\n      return Spacebars.call(self.lookup(\"inSignupFlow\"));\n    }, UI.block(function() {\n      var self = this;\n      return [ \"\\n\t\t\t\", Spacebars.include(self.lookupTemplate(\"_loginButtonsBackToLoginLink\")), \"\\n\t\t\" ];\n    })), \"\\n\t\" ];\n  }));\n}));\n\nTemplate.__define__(\"_forgotPasswordForm\", (function() {\n  var self = this;\n  var template = this;\n  return HTML.DIV({\n    \"class\": \"login-form\"\n  }, \"\\n\t\t\", Spacebars.include(self.lookupTemplate(\"_loginButtonsMessages\")), HTML.Raw('\\n\t\t<div id=\"forgot-password-email-label-and-input\"> \\n\t\t\t<input id=\"forgot-password-email\" type=\"email\" placeholder=\"E-mail\" class=\"form-control\">\\n\t\t</div>\\n\t\t<button class=\"btn btn-primary login-button-form-submit col-sm-12\" id=\"login-buttons-forgot-password\">reset password</button>\\n\t\t'), Spacebars.include(self.lookupTemplate(\"_loginButtonsBackToLoginLink\")), \"\\n\t\");\n}));\n\nTemplate.__define__(\"_loginButtonsBackToLoginLink\", (function() {\n  var self = this;\n  var template = this;\n  return HTML.Raw('<button id=\"back-to-login-link\" class=\"btn btn-default col-sm-12\">cancel</button>');\n}));\n\nTemplate.__define__(\"_loginButtonsFormField\", (function() {\n  var self = this;\n  var template = this;\n  return UI.If(function() {\n    return Spacebars.call(self.lookup(\"visible\"));\n  }, UI.block(function() {\n    var self = this;\n    return [ \"\\n\t\t\", HTML.INPUT({\n      id: [ \"login-\", function() {\n        return Spacebars.mustache(self.lookup(\"fieldName\"));\n      } ],\n      type: function() {\n        return Spacebars.mustache(self.lookup(\"inputType\"));\n      },\n      placeholder: function() {\n        return Spacebars.mustache(self.lookup(\"fieldLabel\"));\n      },\n      \"class\": \"form-control\"\n    }), \"\\n\t\" ];\n  }));\n}));\n\nTemplate.__define__(\"_loginButtonsChangePassword\", (function() {\n  var self = this;\n  var template = this;\n  return [ Spacebars.include(self.lookupTemplate(\"_loginButtonsMessages\")), \"\\n\t\", UI.Each(function() {\n    return Spacebars.call(self.lookup(\"fields\"));\n  }, UI.block(function() {\n    var self = this;\n    return [ \"\\n\t\t\", Spacebars.include(self.lookupTemplate(\"_loginButtonsFormField\")), \"\\n\t\" ];\n  })), HTML.Raw('\\n\t<button class=\"btn btn-primary\" id=\"login-buttons-do-change-password\">change password</button>\\n\t<button class=\"btn btn-default\" id=\"login-buttons-cancel-change-password\">cancel</button>') ];\n}));\n","\nUI.body.contentParts.push(UI.Component.extend({render: (function() {\n  var self = this;\n  return [ Spacebars.include(self.lookupTemplate(\"_resetPasswordDialog\")), \"\\n\t\", Spacebars.include(self.lookupTemplate(\"_enrollAccountDialog\")), \"\\n\t\", Spacebars.include(self.lookupTemplate(\"_justVerifiedEmailDialog\")), \"\\n\t\", Spacebars.include(self.lookupTemplate(\"_configureLoginServiceDialog\")), HTML.Raw(\"\\n\\n\t<!-- if we're not showing a dropdown, we need some other place to show messages -->\\n\t\"), Spacebars.include(self.lookupTemplate(\"_loginButtonsMessagesDialog\")) ];\n})}));\nMeteor.startup(function () { if (! UI.body.INSTANTIATED) { UI.body.INSTANTIATED = true; UI.DomRange.insert(UI.render(UI.body).dom, document.body); } });\n\nTemplate.__define__(\"_resetPasswordDialog\", (function() {\n  var self = this;\n  var template = this;\n  return UI.If(function() {\n    return Spacebars.call(self.lookup(\"inResetPasswordFlow\"));\n  }, UI.block(function() {\n    var self = this;\n    return [ \"\\n\t\t\", HTML.DIV({\n      \"class\": \"modal\",\n      id: \"login-buttons-reset-password-modal\"\n    }, \"\\n\t\t\t\", HTML.DIV({\n      \"class\": \"modal-dialog\"\n    }, \"\\n\t\t\t\t\", HTML.DIV({\n      \"class\": \"modal-content\"\n    }, \"\\n\t\t\t\t\t\", HTML.DIV({\n      \"class\": \"modal-header\"\n    }, \"\\n\t\t\t\t\t\t\", HTML.BUTTON({\n      type: \"button\",\n      \"class\": \"close\",\n      \"data-dismiss\": \"modal\",\n      \"aria-hidden\": \"true\"\n    }, HTML.CharRef({\n      html: \"&times;\",\n      str: \"×\"\n    })), \"\\n\t\t\t\t\t\t\", HTML.H4({\n      \"class\": \"modal-title\"\n    }, \"reset your password\"), \"\\n\t\t\t\t\t\"), \"\\n\t\t\t\t\t\", HTML.DIV({\n      \"class\": \"modal-body\"\n    }, \"\\n\t\t\t\t\t\t\", HTML.INPUT({\n      id: \"reset-password-new-password\",\n      \"class\": \"form-control\",\n      type: \"password\",\n      placeholder: \"New Password\"\n    }), \"\\n\t\t\t\t\t\t\", Spacebars.include(self.lookupTemplate(\"_loginButtonsMessages\")), \"\\n\t\t\t\t\t\"), \"\\n\t\t\t\t\t\", HTML.DIV({\n      \"class\": \"modal-footer\"\n    }, \"\\n\t\t\t\t\t\t\", HTML.A({\n      \"class\": \"btn btn-default\",\n      id: \"login-buttons-cancel-reset-password\"\n    }, \"close\"), \"\\n\t\t\t\t\t\t\", HTML.BUTTON({\n      \"class\": \"btn btn-primary\",\n      id: \"login-buttons-reset-password-button\"\n    }, \"\\n\t\t\t\t\t\t\tset password\\n\t\t\t\t\t\t\"), \"\\n\t\t\t\t\t\"), \"\\n\t\t\t\t\"), HTML.Comment(\" /.modal-content \"), \"\\n\t\t\t\"), HTML.Comment(\" /.modal-dalog \"), \"\\n\t\t\"), HTML.Comment(\" /.modal \"), \"\\n\t\" ];\n  }));\n}));\n\nTemplate.__define__(\"_enrollAccountDialog\", (function() {\n  var self = this;\n  var template = this;\n  return UI.If(function() {\n    return Spacebars.call(self.lookup(\"inEnrollAccountFlow\"));\n  }, UI.block(function() {\n    var self = this;\n    return [ \"\\n\t\t\", HTML.DIV({\n      \"class\": \"modal\",\n      id: \"login-buttons-enroll-account-modal\"\n    }, \"\\n\t\t\t\", HTML.DIV({\n      \"class\": \"modal-dialog\"\n    }, \"\\n\t\t\t\t\", HTML.DIV({\n      \"class\": \"modal-content\"\n    }, \"\\n\t\t\t\t\t\", HTML.DIV({\n      \"class\": \"modal-header\"\n    }, \"\\n\t\t\t\t\t\t\", HTML.BUTTON({\n      type: \"button\",\n      \"class\": \"close\",\n      \"data-dismiss\": \"modal\",\n      \"aria-hidden\": \"true\"\n    }, HTML.CharRef({\n      html: \"&times;\",\n      str: \"×\"\n    })), \"\\n\t\t\t\t\t\t\", HTML.H4({\n      \"class\": \"modal-title\"\n    }, \"choose a password\"), \"\\n\t\t\t\t\t\"), \"\\n\t\t\t\t\t\", HTML.DIV({\n      \"class\": \"modal-body\"\n    }, \"\\n\t\t\t\t\t\t\", HTML.INPUT({\n      id: \"enroll-account-password\",\n      \"class\": \"form-control\",\n      type: \"password\",\n      placeholder: \"New Password\"\n    }), \"\\n\t\t\t\t\t\t\", Spacebars.include(self.lookupTemplate(\"_loginButtonsMessages\")), \"\\n\t\t\t\t\t\"), \"\\n\t\t\t\t\t\", HTML.DIV({\n      \"class\": \"modal-footer\"\n    }, \"\\n\t\t\t\t\t\t\", HTML.A({\n      \"class\": \"btn btn-default\",\n      id: \"login-buttons-cancel-enroll-account-button\"\n    }, \"close\"), \"\\n\t\t\t\t\t\t\", HTML.BUTTON({\n      \"class\": \"btn btn-primary\",\n      id: \"login-buttons-enroll-account-button\"\n    }, \"\\n\t\t\t\t\t\t\tset password\\n\t\t\t\t\t\t\"), \"\\n\t\t\t\t\t\"), \"\\n\t\t\t\t\"), HTML.Comment(\" /.modal-content \"), \"\\n\t\t\t\"), HTML.Comment(\" /.modal-dalog \"), \"\\n\t\t\"), HTML.Comment(\" /.modal \"), \"\\n\t\" ];\n  }));\n}));\n\nTemplate.__define__(\"_justVerifiedEmailDialog\", (function() {\n  var self = this;\n  var template = this;\n  return UI.If(function() {\n    return Spacebars.call(self.lookup(\"visible\"));\n  }, UI.block(function() {\n    var self = this;\n    return [ \"\\n\t\t\", HTML.DIV({\n      \"class\": \"accounts-dialog accounts-centered-dialog\"\n    }, \"\\n\t\t\temail verified\\n\t\t\t\", HTML.DIV({\n      \"class\": \"login-button\",\n      id: \"just-verified-dismiss-button\"\n    }, \"dismiss\"), \"\\n\t\t\"), \"\\n\t\" ];\n  }));\n}));\n\nTemplate.__define__(\"_configureLoginServiceDialog\", (function() {\n  var self = this;\n  var template = this;\n  return UI.If(function() {\n    return Spacebars.call(self.lookup(\"visible\"));\n  }, UI.block(function() {\n    var self = this;\n    return [ \"\\n\t\", HTML.DIV({\n      \"class\": \"modal\",\n      id: \"configure-login-service-dialog-modal\"\n    }, \"\\n\t\t\t\", HTML.DIV({\n      \"class\": \"modal-dialog\"\n    }, \"\\n\t\t\t\t\t\", HTML.DIV({\n      \"class\": \"modal-content\"\n    }, \"\\n\t\t\t\t\t\t\t\", HTML.DIV({\n      \"class\": \"modal-header\"\n    }, \"\\n\t\t\t\t\t\t\t\t\t\", HTML.H4({\n      \"class\": \"modal-title\"\n    }, \"Configure Service\"), \"\\n\t\t\t\t\t\t\t\"), \"\\n\t\t\t\t\t\t\t\", HTML.DIV({\n      \"class\": \"modal-body\"\n    }, \"\\n\t\t\t\t\t\t\t\t\t\", HTML.DIV({\n      id: \"configure-login-service-dialog\",\n      \"class\": \"accounts-dialog accounts-centered-dialog\"\n    }, \"\\n\t\t\t\t\t\t\t\t\t\t\t\", Spacebars.include(self.lookupTemplate(\"configurationSteps\")), \"\\n\t\t\t\t\t\t\t\t\t\t\t\", HTML.P(\"\\n\t\t\t\t\t\t\t\t\t\t\tNow, copy over some details.\\n\t\t\t\t\t\t\t\t\t\t\t\"), \"\\n\t\t\t\t\t\t\t\t\t\t\t\", HTML.P(\"\\n\t\t\t\t\t\t\t\t\t\t\t\", HTML.TABLE(\"\\n\t\t\t\t\t\t\t\t\t\t\t\t\t\", HTML.COLGROUP(\"\\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\", HTML.COL({\n      span: \"1\",\n      \"class\": \"configuration_labels\"\n    }), \"\\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\", HTML.COL({\n      span: \"1\",\n      \"class\": \"configuration_inputs\"\n    }), \"\\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"), \"\\n\t\t\t\t\t\t\t\t\t\t\t\t\t\", UI.Each(function() {\n      return Spacebars.call(self.lookup(\"configurationFields\"));\n    }, UI.block(function() {\n      var self = this;\n      return [ \"\\n\t\t\t\t\t\t\t\t\t\t\t\t\t\", HTML.TR(\"\\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\", HTML.TD(\"\\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\", HTML.LABEL({\n        \"for\": [ \"configure-login-service-dialog-\", function() {\n          return Spacebars.mustache(self.lookup(\"property\"));\n        } ]\n      }, function() {\n        return Spacebars.mustache(self.lookup(\"label\"));\n      }), \"\\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"), \"\\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\", HTML.TD(\"\\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\", HTML.INPUT({\n        id: [ \"configure-login-service-dialog-\", function() {\n          return Spacebars.mustache(self.lookup(\"property\"));\n        } ],\n        type: \"text\"\n      }), \"\\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"), \"\\n\t\t\t\t\t\t\t\t\t\t\t\t\t\"), \"\\n\t\t\t\t\t\t\t\t\t\t\t\t\t\" ];\n    })), \"\\n\t\t\t\t\t\t\t\t\t\t\t\"), \"\\n\t\t\t\t\t\t\t\t\t\t\t\"), \"\\n\t\t\t\t\t\t\t\t\t\"), \"\\n\t\t\t\t\t\t\t\"), \"\\n\t\t\t\t\t\t\t\", HTML.DIV({\n      \"class\": \"modal-footer new-section\"\n    }, \"\\n\t\t\t\t\t\t\t\t\t\", HTML.DIV({\n      \"class\": \"login-button btn btn-danger configure-login-service-dismiss-button\"\n    }, \"\\n\t\t\t\t\t\t\t\t\t\t\tI'll do this later\\n\t\t\t\t\t\t\t\t\t\"), \"\\n\t\t\t\t\t\t\t\t\t\", HTML.DIV({\n      \"class\": [ \"login-button login-button-configure btn btn-success \", UI.If(function() {\n        return Spacebars.call(self.lookup(\"saveDisabled\"));\n      }, UI.block(function() {\n        var self = this;\n        return \"login-button-disabled\";\n      })) ],\n      id: \"configure-login-service-dialog-save-configuration\"\n    }, \"\\n\t\t\t\t\t\t\t\t\t\t\tSave Configuration\\n\t\t\t\t\t\t\t\t\t\"), \"\\n\t\t\t\t\t\t\t\"), \"\\n\t\t\t\t\t\"), \"\\n\t\t\t\"), \"\\n\t\"), \"\\n\t\" ];\n  }));\n}));\n\nTemplate.__define__(\"_loginButtonsMessagesDialog\", (function() {\n  var self = this;\n  var template = this;\n  return UI.If(function() {\n    return Spacebars.call(self.lookup(\"visible\"));\n  }, UI.block(function() {\n    var self = this;\n    return [ \"\\n\t\t\", HTML.DIV({\n      \"class\": \"accounts-dialog accounts-centered-dialog\",\n      id: \"login-buttons-message-dialog\"\n    }, \"\\n\t\t\t\", Spacebars.include(self.lookupTemplate(\"_loginButtonsMessages\")), \"\\n\t\t\t\", HTML.DIV({\n      \"class\": \"login-button\",\n      id: \"messages-dialog-dismiss-button\"\n    }, \"Dismiss\"), \"\\n\t\t\"), \"\\n\t\" ];\n  }));\n}));\n","(function () {\n\tvar VALID_KEYS = [\n\t\t'dropdownVisible',\n\n\t\t// XXX consider replacing these with one key that has an enum for values.\n\t\t'inSignupFlow',\n\t\t'inForgotPasswordFlow',\n\t\t'inChangePasswordFlow',\n\t\t'inMessageOnlyFlow',\n\n\t\t'errorMessage',\n\t\t'infoMessage',\n\n\t\t// dialogs with messages (info and error)\n\t\t'resetPasswordToken',\n\t\t'enrollAccountToken',\n\t\t'justVerifiedEmail',\n\n\t\t'configureLoginServiceDialogVisible',\n\t\t'configureLoginServiceDialogServiceName',\n\t\t'configureLoginServiceDialogSaveDisabled'\n\t];\n\n\tvar validateKey = function (key) {\n\t\tif (!_.contains(VALID_KEYS, key))\n\t\t\tthrow new Error(\"Invalid key in loginButtonsSession: \" + key);\n\t};\n\n\tvar KEY_PREFIX = \"Meteor.loginButtons.\";\n\n\t// XXX we should have a better pattern for code private to a package like this one\n\tAccounts._loginButtonsSession = {\n\t\tset: function(key, value) {\n\t\t\tvalidateKey(key);\n\t\t\tif (_.contains(['errorMessage', 'infoMessage'], key))\n\t\t\t\tthrow new Error(\"Don't set errorMessage or infoMessage directly. Instead, use errorMessage() or infoMessage().\");\n\n\t\t\tthis._set(key, value);\n\t\t},\n\n\t\t_set: function(key, value) {\n\t\t\tSession.set(KEY_PREFIX + key, value);\n\t\t},\n\n\t\tget: function(key) {\n\t\t\tvalidateKey(key);\n\t\t\treturn Session.get(KEY_PREFIX + key);\n\t\t},\n\n\t\tcloseDropdown: function () {\n\t\t\tthis.set('inSignupFlow', false);\n\t\t\tthis.set('inForgotPasswordFlow', false);\n\t\t\tthis.set('inChangePasswordFlow', false);\n\t\t\tthis.set('inMessageOnlyFlow', false);\n\t\t\tthis.set('dropdownVisible', false);\n\t\t\tthis.resetMessages();\n\t\t},\n\n\t\tinfoMessage: function(message) {\n\t\t\tthis._set(\"errorMessage\", null);\n\t\t\tthis._set(\"infoMessage\", message);\n\t\t\tthis.ensureMessageVisible();\n\t\t},\n\n\t\terrorMessage: function(message) {\n\t\t\tthis._set(\"errorMessage\", message);\n\t\t\tthis._set(\"infoMessage\", null);\n\t\t\tthis.ensureMessageVisible();\n\t\t},\n\n\t\t// is there a visible dialog that shows messages (info and error)\n\t\tisMessageDialogVisible: function () {\n\t\t\treturn this.get('resetPasswordToken') ||\n\t\t\t\tthis.get('enrollAccountToken') ||\n\t\t\t\tthis.get('justVerifiedEmail');\n\t\t},\n\n\t\t// ensure that somethings displaying a message (info or error) is\n\t\t// visible.  if a dialog with messages is open, do nothing;\n\t\t// otherwise open the dropdown.\n\t\t//\n\t\t// notably this doesn't matter when only displaying a single login\n\t\t// button since then we have an explicit message dialog\n\t\t// (_loginButtonsMessageDialog), and dropdownVisible is ignored in\n\t\t// this case.\n\t\tensureMessageVisible: function () {\n\t\t\tif (!this.isMessageDialogVisible())\n\t\t\t\tthis.set(\"dropdownVisible\", true);\n\t\t},\n\n\t\tresetMessages: function () {\n\t\t\tthis._set(\"errorMessage\", null);\n\t\t\tthis._set(\"infoMessage\", null);\n\t\t},\n\n\t\tconfigureService: function (name) {\n\t\t\tthis.set('configureLoginServiceDialogVisible', true);\n\t\t\tthis.set('configureLoginServiceDialogServiceName', name);\n\t\t\tthis.set('configureLoginServiceDialogSaveDisabled', true);\n\t\t\tsetTimeout(function(){\n\t\t\t\t$('#configure-login-service-dialog-modal').modal();\n\t\t\t}, 500)\n\t\t}\n\t};\n}) ();\n","(function() {\n\tif (!Accounts._loginButtons)\n\t\tAccounts._loginButtons = {};\n\n\t// for convenience\n\tvar loginButtonsSession = Accounts._loginButtonsSession;\n\n\tUI.registerHelper(\"loginButtons\", function () {\n\t\treturn Template._loginButtons;\n\t});\n\n\t// shared between dropdown and single mode\n\tTemplate._loginButtons.events({\n\t\t'click #login-buttons-logout': function() {\n\t\t\tMeteor.logout(function() {\n\t\t\t\tloginButtonsSession.closeDropdown();\n\t\t\t});\n\t\t}\n\t});\n\n\t//\n\t// loginButtonLoggedOut template\n\t//\n\n\tTemplate._loginButtonsLoggedOut.dropdown = function() {\n\t\treturn Accounts._loginButtons.dropdown();\n\t};\n\n\tTemplate._loginButtonsLoggedOut.services = function() {\n\t\treturn Accounts._loginButtons.getLoginServices();\n\t};\n\n\tTemplate._loginButtonsLoggedOut.singleService = function() {\n\t\tvar services = Accounts._loginButtons.getLoginServices();\n\t\tif (services.length !== 1)\n\t\t\tthrow new Error(\n\t\t\t\t\"Shouldn't be rendering this template with more than one configured service\");\n\t\treturn services[0];\n\t};\n\n\tTemplate._loginButtonsLoggedOut.configurationLoaded = function() {\n\t\treturn Accounts.loginServicesConfigured();\n\t};\n\n\n\t//\n\t// loginButtonsLoggedIn template\n\t//\n\n\t// decide whether we should show a dropdown rather than a row of\n\t// buttons\n\tTemplate._loginButtonsLoggedIn.dropdown = function() {\n\t\treturn Accounts._loginButtons.dropdown();\n\t};\n\n\tTemplate._loginButtonsLoggedIn.displayName = function() {\n\t\treturn Accounts._loginButtons.displayName();\n\t};\n\n\n\n\t//\n\t// loginButtonsMessage template\n\t//\n\n\tTemplate._loginButtonsMessages.errorMessage = function() {\n\t\treturn loginButtonsSession.get('errorMessage');\n\t};\n\n\tTemplate._loginButtonsMessages.infoMessage = function() {\n\t\treturn loginButtonsSession.get('infoMessage');\n\t};\n\n\t//\n\t// loginButtonsLoggingInPadding template\n\t//\n\n\tTemplate._loginButtonsLoggingInPadding.dropdown = function() {\n\t\treturn Accounts._loginButtons.dropdown();\n\t};\n\n\t//\n\t// helpers\n\t//\n\n\tAccounts._loginButtons.displayName = function() {\n\t\tvar user = Meteor.user();\n\t\tif (!user)\n\t\t\treturn '';\n\n\t\tif (user.profile && user.profile.name)\n\t\t\treturn user.profile.name;\n\t\tif (user.username)\n\t\t\treturn user.username;\n\t\tif (user.emails && user.emails[0] && user.emails[0].address)\n\t\t\treturn user.emails[0].address;\n\n\t\treturn '';\n\t};\n\n\tAccounts._loginButtons.getLoginServices = function() {\n\t\t// First look for OAuth services.\n\t\tvar services = Package['accounts-oauth'] ? Accounts.oauth.serviceNames() : [];\n\n\t\t// Be equally kind to all login services. This also preserves\n\t\t// backwards-compatibility. (But maybe order should be\n\t\t// configurable?)\n\t\tservices.sort();\n\n\t\t// Add password, if it's there; it must come last.\n\t\tif (this.hasPasswordService())\n\t\t\tservices.push('password');\n\n\t\treturn _.map(services, function(name) {\n\t\t\treturn {\n\t\t\t\tname: name\n\t\t\t};\n\t\t});\n\t};\n\n\tAccounts._loginButtons.hasPasswordService = function() {\n\t\treturn !!Package['accounts-password'];\n\t};\n\n\tAccounts._loginButtons.dropdown = function() {\n\t\treturn this.hasPasswordService() || Accounts._loginButtons.getLoginServices().length > 1;\n\t};\n\n\t// XXX improve these. should this be in accounts-password instead?\n\t//\n\t// XXX these will become configurable, and will be validated on\n\t// the server as well.\n\tAccounts._loginButtons.validateUsername = function(username) {\n\t\tif (username.length >= 3) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\tloginButtonsSession.errorMessage(\"Username must be at least 3 characters long\");\n\t\t\treturn false;\n\t\t}\n\t};\n\tAccounts._loginButtons.validateEmail = function(email) {\n\t\tif (Accounts.ui._passwordSignupFields() === \"USERNAME_AND_OPTIONAL_EMAIL\" && email === '')\n\t\t\treturn true;\n\n\t\tvar re = /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n\n\t\tif (re.test(email)) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\tloginButtonsSession.errorMessage(\"Invalid email\");\n\t\t\treturn false;\n\t\t}\n\t};\n\tAccounts._loginButtons.validatePassword = function(password) {\n\t\tif (password.length >= 6) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\tloginButtonsSession.errorMessage(\"Password must be at least 6 characters long\");\n\t\t\treturn false;\n\t\t}\n\t};\n\n\tAccounts._loginButtons.rendered = function () {\n\t\tdebugger;\n\t};\n\n})();\n","(function () {\n\t// for convenience\n\tvar loginButtonsSession = Accounts._loginButtonsSession;\n\n\tTemplate._loginButtonsLoggedOutSingleLoginButton.events({\n\t\t'click .login-button': function () {\n\t\t\tvar serviceName = this.name;\n\t\t\tloginButtonsSession.resetMessages();\n\t\t\tvar callback = function (err) {\n\t\t\t\tif (!err) {\n\t\t\t\t\tloginButtonsSession.closeDropdown();\n\t\t\t\t} else if (err instanceof Accounts.LoginCancelledError) {\n\t\t\t\t\t// do nothing\n\t\t\t\t} else if (err instanceof Accounts.ConfigError) {\n\t\t\t\t\tloginButtonsSession.configureService(serviceName);\n\t\t\t\t} else {\n\t\t\t\t\tloginButtonsSession.errorMessage(err.reason || \"Unknown error\");\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tvar loginWithService = Meteor[\"loginWith\" + capitalize(serviceName)];\n\n\t\t\tvar options = {}; // use default scope unless specified\n\t\t\tif (Accounts.ui._options.requestPermissions[serviceName])\n\t\t\t\toptions.requestPermissions = Accounts.ui._options.requestPermissions[serviceName];\n\n\t\t\tloginWithService(options, callback);\n\t\t}\n\t});\n\n\tTemplate._loginButtonsLoggedOutSingleLoginButton.configured = function () {\n\t\treturn !!Accounts.loginServiceConfiguration.findOne({service: this.name});\n\t};\n\n\tTemplate._loginButtonsLoggedOutSingleLoginButton.capitalizedName = function () {\n\t\tif (this.name === 'github')\n\t\t\t// XXX we should allow service packages to set their capitalized name\n\t\t\treturn 'GitHub';\n\t\telse\n\t\t\treturn capitalize(this.name);\n\t};\n\n\t// XXX from http://epeli.github.com/underscore.string/lib/underscore.string.js\n\tvar capitalize = function(str){\n\t\tstr = str == null ? '' : String(str);\n\t\treturn str.charAt(0).toUpperCase() + str.slice(1);\n\t};\n}) ();","(function() {\n\n\t// for convenience\n\tvar loginButtonsSession = Accounts._loginButtonsSession;\n\n\t// events shared between loginButtonsLoggedOutDropdown and\n\t// loginButtonsLoggedInDropdown\n\tTemplate._loginButtons.events({\n\t\t'click input': function(){\n\t\t\tevent.stopPropagation();\n\t\t},\n\t\t'click #login-name-link, click #login-sign-in-link': function() {\n\t\t\tevent.stopPropagation();\n\t\t\tloginButtonsSession.set('dropdownVisible', true);\n\t\t\tMeteor.flush();\n\t\t},\n\t\t'click .login-close': function() {\n\t\t\tloginButtonsSession.closeDropdown();\n\t\t}\n\t});\n\n\tTemplate._loginButtons.toggleDropdown = function() {\n\t\ttoggleDropdown();\n\t};\n\n\t//\n\t// loginButtonsLoggedInDropdown template and related\n\t//\n\n\tTemplate._loginButtonsLoggedInDropdown.events({\n\t\t'click #login-buttons-open-change-password': function(event) {\n\t\t\tevent.stopPropagation();\n\t\t\tloginButtonsSession.resetMessages();\n\t\t\tloginButtonsSession.set('inChangePasswordFlow', true);\n\t\t\tMeteor.flush();\n\t\t}\n\t});\n\n\tTemplate._loginButtonsLoggedInDropdown.displayName = function() {\n\t\treturn Accounts._loginButtons.displayName();\n\t};\n\n\tTemplate._loginButtonsLoggedInDropdown.inChangePasswordFlow = function() {\n\t\treturn loginButtonsSession.get('inChangePasswordFlow');\n\t};\n\n\tTemplate._loginButtonsLoggedInDropdown.inMessageOnlyFlow = function() {\n\t\treturn loginButtonsSession.get('inMessageOnlyFlow');\n\t};\n\n\tTemplate._loginButtonsLoggedInDropdown.dropdownVisible = function() {\n\t\treturn loginButtonsSession.get('dropdownVisible');\n\t};\n\n\tTemplate._loginButtonsLoggedInDropdownActions.allowChangingPassword = function() {\n\t\t// it would be more correct to check whether the user has a password set,\n\t\t// but in order to do that we'd have to send more data down to the client,\n\t\t// and it'd be preferable not to send down the entire service.password document.\n\t\t//\n\t\t// instead we use the heuristic: if the user has a username or email set.\n\t\tvar user = Meteor.user();\n\t\treturn user.username || (user.emails && user.emails[0] && user.emails[0].address);\n\t};\n\n\n\tTemplate._loginButtonsLoggedInDropdownActions.additionalLoggedInDropdownActions = function () {\n\t  return Template._loginButtonsAdditionalLoggedInDropdownActions !== undefined;\n\t};\n\n\t//\n\t// loginButtonsLoggedOutDropdown template and related\n\t//\n\n\tTemplate._loginButtonsLoggedOutDropdown.events({\n\t\t'click #login-buttons-password': function() {\n\t\t\tevent.stopPropagation();\n\t\t\tloginOrSignup();\n\t\t},\n\n\t\t'keypress #forgot-password-email': function(event) {\n\t\t\tevent.stopPropagation();\n\t\t\tif (event.keyCode === 13)\n\t\t\t\tforgotPassword();\n\t\t},\n\n\t\t'click #login-buttons-forgot-password': function(event) {\n\t\t\tevent.stopPropagation();\n\t\t\tforgotPassword();\n\t\t},\n\n\t\t'click #signup-link': function(event) {\n\t\t\tevent.stopPropagation();\n\t\t\tloginButtonsSession.resetMessages();\n\n\t\t\t// store values of fields before swtiching to the signup form\n\t\t\tvar username = trimmedElementValueById('login-username');\n\t\t\tvar email = trimmedElementValueById('login-email');\n\t\t\tvar usernameOrEmail = trimmedElementValueById('login-username-or-email');\n\t\t\t// notably not trimmed. a password could (?) start or end with a space\n\t\t\tvar password = elementValueById('login-password');\n\n\t\t\tloginButtonsSession.set('inSignupFlow', true);\n\t\t\tloginButtonsSession.set('inForgotPasswordFlow', false);\n\n\t\t\t// force the ui to update so that we have the approprate fields to fill in\n\t\t\tMeteor.flush();\n\n\t\t\t// update new fields with appropriate defaults\n\t\t\tif (username !== null)\n\t\t\t\tdocument.getElementById('login-username').value = username;\n\t\t\telse if (email !== null)\n\t\t\t\tdocument.getElementById('login-email').value = email;\n\t\t\telse if (usernameOrEmail !== null)\n\t\t\t\tif (usernameOrEmail.indexOf('@') === -1)\n\t\t\t\t\tdocument.getElementById('login-username').value = usernameOrEmail;\n\t\t\t\telse\n\t\t\t\t\tdocument.getElementById('login-email').value = usernameOrEmail;\n\t\t},\n\t\t'click #forgot-password-link': function(event) {\n\t\t\tevent.stopPropagation();\n\t\t\tloginButtonsSession.resetMessages();\n\n\t\t\t// store values of fields before swtiching to the signup form\n\t\t\tvar email = trimmedElementValueById('login-email');\n\t\t\tvar usernameOrEmail = trimmedElementValueById('login-username-or-email');\n\n\t\t\tloginButtonsSession.set('inSignupFlow', false);\n\t\t\tloginButtonsSession.set('inForgotPasswordFlow', true);\n\n\t\t\t// force the ui to update so that we have the approprate fields to fill in\n\t\t\tMeteor.flush();\n\t\t\t//toggleDropdown();\n\n\t\t\t// update new fields with appropriate defaults\n\t\t\tif (email !== null)\n\t\t\t\tdocument.getElementById('forgot-password-email').value = email;\n\t\t\telse if (usernameOrEmail !== null)\n\t\t\t\tif (usernameOrEmail.indexOf('@') !== -1)\n\t\t\t\t\tdocument.getElementById('forgot-password-email').value = usernameOrEmail;\n\t\t},\n\t\t'click #back-to-login-link': function() {\n\t\t\tevent.stopPropagation();\n\t\t\tloginButtonsSession.resetMessages();\n\n\t\t\tvar username = trimmedElementValueById('login-username');\n\t\t\tvar email = trimmedElementValueById('login-email') || trimmedElementValueById('forgot-password-email'); // Ughh. Standardize on names?\n\n\t\t\tloginButtonsSession.set('inSignupFlow', false);\n\t\t\tloginButtonsSession.set('inForgotPasswordFlow', false);\n\n\t\t\t// force the ui to update so that we have the approprate fields to fill in\n\t\t\tMeteor.flush();\n\n\t\t\tif (document.getElementById('login-username'))\n\t\t\t\tdocument.getElementById('login-username').value = username;\n\t\t\tif (document.getElementById('login-email'))\n\t\t\t\tdocument.getElementById('login-email').value = email;\n\t\t\t// \"login-password\" is preserved thanks to the preserve-inputs package\n\t\t\tif (document.getElementById('login-username-or-email'))\n\t\t\t\tdocument.getElementById('login-username-or-email').value = email || username;\n\t\t},\n\t\t'keypress #login-username, keypress #login-email, keypress #login-username-or-email, keypress #login-password, keypress #login-password-again': function(event) {\n\t\t\tif (event.keyCode === 13)\n\t\t\t\tloginOrSignup();\n\t\t}\n\t});\n\n\t// additional classes that can be helpful in styling the dropdown\n\tTemplate._loginButtonsLoggedOutDropdown.additionalClasses = function() {\n\t\tif (!Accounts.password) {\n\t\t\treturn false;\n\t\t} else {\n\t\t\tif (loginButtonsSession.get('inSignupFlow')) {\n\t\t\t\treturn 'login-form-create-account';\n\t\t\t} else if (loginButtonsSession.get('inForgotPasswordFlow')) {\n\t\t\t\treturn 'login-form-forgot-password';\n\t\t\t} else {\n\t\t\t\treturn 'login-form-sign-in';\n\t\t\t}\n\t\t}\n\t};\n\n\tTemplate._loginButtonsLoggedOutDropdown.dropdownVisible = function() {\n\t\treturn loginButtonsSession.get('dropdownVisible');\n\t};\n\n\tTemplate._loginButtonsLoggedOutDropdown.hasPasswordService = function() {\n\t\treturn Accounts._loginButtons.hasPasswordService();\n\t};\n\n\tTemplate._loginButtonsLoggedOutDropdown.forbidClientAccountCreation = function() {\n\t\treturn Accounts._options.forbidClientAccountCreation;\n\t};\n\n\tTemplate._loginButtonsLoggedOutAllServices.services = function() {\n\t\treturn Accounts._loginButtons.getLoginServices();\n\t};\n\n\tTemplate._loginButtonsLoggedOutAllServices.isPasswordService = function() {\n\t\treturn this.name === 'password';\n\t};\n\n\tTemplate._loginButtonsLoggedOutAllServices.hasOtherServices = function() {\n\t\treturn Accounts._loginButtons.getLoginServices().length > 1;\n\t};\n\n\tTemplate._loginButtonsLoggedOutAllServices.hasPasswordService = function() {\n\t\treturn Accounts._loginButtons.hasPasswordService();\n\t};\n\n\tTemplate._loginButtonsLoggedOutPasswordService.fields = function() {\n\t\tvar loginFields = [{\n\t\t\tfieldName: 'username-or-email',\n\t\t\tfieldLabel: 'Username or Email',\n\t\t\tvisible: function() {\n\t\t\t\treturn _.contains(\n\t\t\t\t\t[\"USERNAME_AND_EMAIL_CONFIRM\", \"USERNAME_AND_EMAIL\", \"USERNAME_AND_OPTIONAL_EMAIL\"],\n\t\t\t\t\tAccounts.ui._passwordSignupFields());\n\t\t\t}\n\t\t}, {\n\t\t\tfieldName: 'username',\n\t\t\tfieldLabel: 'Username',\n\t\t\tvisible: function() {\n\t\t\t\treturn Accounts.ui._passwordSignupFields() === \"USERNAME_ONLY\";\n\t\t\t}\n\t\t}, {\n\t\t\tfieldName: 'email',\n\t\t\tfieldLabel: 'Email',\n\t\t\tinputType: 'email',\n\t\t\tvisible: function() {\n\t\t\t\treturn Accounts.ui._passwordSignupFields() === \"EMAIL_ONLY\";\n\t\t\t}\n\t\t}, {\n\t\t\tfieldName: 'password',\n\t\t\tfieldLabel: 'Password',\n\t\t\tinputType: 'password',\n\t\t\tvisible: function() {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}];\n\n\t\tvar signupFields = [{\n\t\t\tfieldName: 'username',\n\t\t\tfieldLabel: 'Username',\n\t\t\tvisible: function() {\n\t\t\t\treturn _.contains(\n\t\t\t\t\t[\"USERNAME_AND_EMAIL_CONFIRM\", \"USERNAME_AND_EMAIL\", \"USERNAME_AND_OPTIONAL_EMAIL\", \"USERNAME_ONLY\"],\n\t\t\t\t\tAccounts.ui._passwordSignupFields());\n\t\t\t}\n\t\t}, {\n\t\t\tfieldName: 'email',\n\t\t\tfieldLabel: 'Email',\n\t\t\tinputType: 'email',\n\t\t\tvisible: function() {\n\t\t\t\treturn _.contains(\n\t\t\t\t\t[\"USERNAME_AND_EMAIL_CONFIRM\", \"USERNAME_AND_EMAIL\", \"EMAIL_ONLY\"],\n\t\t\t\t\tAccounts.ui._passwordSignupFields());\n\t\t\t}\n\t\t}, {\n\t\t\tfieldName: 'email',\n\t\t\tfieldLabel: 'Email (optional)',\n\t\t\tinputType: 'email',\n\t\t\tvisible: function() {\n\t\t\t\treturn Accounts.ui._passwordSignupFields() === \"USERNAME_AND_OPTIONAL_EMAIL\";\n\t\t\t}\n\t\t}, {\n\t\t\tfieldName: 'password',\n\t\t\tfieldLabel: 'Password',\n\t\t\tinputType: 'password',\n\t\t\tvisible: function() {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}, {\n\t\t\tfieldName: 'password-again',\n\t\t\tfieldLabel: 'Password (again)',\n\t\t\tinputType: 'password',\n\t\t\tvisible: function() {\n\t\t\t\t// No need to make users double-enter their password if\n\t\t\t\t// they'll necessarily have an email set, since they can use\n\t\t\t\t// the \"forgot password\" flow.\n\t\t\t\treturn _.contains(\n\t\t\t\t\t[\"USERNAME_AND_EMAIL_CONFIRM\", \"USERNAME_AND_OPTIONAL_EMAIL\", \"USERNAME_ONLY\"],\n\t\t\t\t\tAccounts.ui._passwordSignupFields());\n\t\t\t}\n\t\t}];\n\n\t\tsignupFields = Accounts.ui._options.extraSignupFields.concat(signupFields);\n\n\t\treturn loginButtonsSession.get('inSignupFlow') ? signupFields : loginFields;\n\t};\n\n\tTemplate._loginButtonsLoggedOutPasswordService.inForgotPasswordFlow = function() {\n\t\treturn loginButtonsSession.get('inForgotPasswordFlow');\n\t};\n\n\tTemplate._loginButtonsLoggedOutPasswordService.inLoginFlow = function() {\n\t\treturn !loginButtonsSession.get('inSignupFlow') && !loginButtonsSession.get('inForgotPasswordFlow');\n\t};\n\n\tTemplate._loginButtonsLoggedOutPasswordService.inSignupFlow = function() {\n\t\treturn loginButtonsSession.get('inSignupFlow');\n\t};\n\n\tTemplate._loginButtonsLoggedOutPasswordService.showForgotPasswordLink = function() {\n\t\treturn _.contains(\n\t\t\t[\"USERNAME_AND_EMAIL_CONFIRM\", \"USERNAME_AND_EMAIL\", \"USERNAME_AND_OPTIONAL_EMAIL\", \"EMAIL_ONLY\"],\n\t\t\tAccounts.ui._passwordSignupFields());\n\t};\n\n\tTemplate._loginButtonsLoggedOutPasswordService.showCreateAccountLink = function() {\n\t\treturn !Accounts._options.forbidClientAccountCreation;\n\t};\n\n\tTemplate._loginButtonsFormField.inputType = function() {\n\t\treturn this.inputType || \"text\";\n\t};\n\n\n\t//\n\t// loginButtonsChangePassword template\n\t//\n\tTemplate._loginButtonsChangePassword.events({\n\t\t'keypress #login-old-password, keypress #login-password, keypress #login-password-again': function(event) {\n\t\t\tif (event.keyCode === 13)\n\t\t\t\tchangePassword();\n\t\t},\n\t\t'click #login-buttons-do-change-password': function(event) {\n\t\t\tevent.stopPropagation();\n\t\t\tchangePassword();\n\t\t},\n\t\t'click #login-buttons-cancel-change-password': function(event) {\n\t\t\tevent.stopPropagation();\n\t\t\tloginButtonsSession.resetMessages();\n\t\t\tAccounts._loginButtonsSession.set('inChangePasswordFlow', false);\n\t\t\tMeteor.flush();\n\t\t}\n\t});\n\n\tTemplate._loginButtonsChangePassword.fields = function() {\n\t\treturn [{\n\t\t\tfieldName: 'old-password',\n\t\t\tfieldLabel: 'Current Password',\n\t\t\tinputType: 'password',\n\t\t\tvisible: function() {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}, {\n\t\t\tfieldName: 'password',\n\t\t\tfieldLabel: 'New Password',\n\t\t\tinputType: 'password',\n\t\t\tvisible: function() {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}, {\n\t\t\tfieldName: 'password-again',\n\t\t\tfieldLabel: 'New Password (again)',\n\t\t\tinputType: 'password',\n\t\t\tvisible: function() {\n\t\t\t\t// No need to make users double-enter their password if\n\t\t\t\t// they'll necessarily have an email set, since they can use\n\t\t\t\t// the \"forgot password\" flow.\n\t\t\t\treturn _.contains(\n\t\t\t\t\t[\"USERNAME_AND_OPTIONAL_EMAIL\", \"USERNAME_ONLY\"],\n\t\t\t\t\tAccounts.ui._passwordSignupFields());\n\t\t\t}\n\t\t}];\n\t};\n\n\n\t//\n\t// helpers\n\t//\n\n\tvar elementValueById = function(id) {\n\t\tvar element = document.getElementById(id);\n\t\tif (!element)\n\t\t\treturn null;\n\t\telse\n\t\t\treturn element.value;\n\t};\n\n\tvar trimmedElementValueById = function(id) {\n\t\tvar element = document.getElementById(id);\n\t\tif (!element)\n\t\t\treturn null;\n\t\telse\n\t\t\treturn element.value.replace(/^\\s*|\\s*$/g, \"\"); // trim;\n\t};\n\n\tvar loginOrSignup = function() {\n\t\tif (loginButtonsSession.get('inSignupFlow'))\n\t\t\tsignup();\n\t\telse\n\t\t\tlogin();\n\t};\n\n\tvar login = function() {\n\t\tloginButtonsSession.resetMessages();\n\n\t\tvar username = trimmedElementValueById('login-username');\n\t\tvar email = trimmedElementValueById('login-email');\n\t\tvar usernameOrEmail = trimmedElementValueById('login-username-or-email');\n\t\t// notably not trimmed. a password could (?) start or end with a space\n\t\tvar password = elementValueById('login-password');\n\n\t\tvar loginSelector;\n\t\tif (username !== null) {\n\t\t\tif (!Accounts._loginButtons.validateUsername(username))\n\t\t\t\treturn;\n\t\t\telse\n\t\t\t\tloginSelector = {\n\t\t\t\t\tusername: username\n\t\t\t\t};\n\t\t} else if (email !== null) {\n\t\t\tif (!Accounts._loginButtons.validateEmail(email))\n\t\t\t\treturn;\n\t\t\telse\n\t\t\t\tloginSelector = {\n\t\t\t\t\temail: email\n\t\t\t\t};\n\t\t} else if (usernameOrEmail !== null) {\n\t\t\t// XXX not sure how we should validate this. but this seems good enough (for now),\n\t\t\t// since an email must have at least 3 characters anyways\n\t\t\tif (!Accounts._loginButtons.validateUsername(usernameOrEmail))\n\t\t\t\treturn;\n\t\t\telse\n\t\t\t\tloginSelector = usernameOrEmail;\n\t\t} else {\n\t\t\tthrow new Error(\"Unexpected -- no element to use as a login user selector\");\n\t\t}\n\n\t\tMeteor.loginWithPassword(loginSelector, password, function(error, result) {\n\t\t\tif (error) {\n\t\t\t\tloginButtonsSession.errorMessage(error.reason || \"Unknown error\");\n\t\t\t} else {\n\t\t\t\tloginButtonsSession.closeDropdown();\n\t\t\t}\n\t\t});\n\t};\n\n\tvar toggleDropdown = function() {\n\t\t$('#login-dropdown-list .dropdown-menu').dropdown('toggle');\n\t};\n\n\tvar signup = function() {\n\t\tloginButtonsSession.resetMessages();\n\n\t\tvar options = {}; // to be passed to Accounts.createUser\n\n\t\tvar username = trimmedElementValueById('login-username');\n\t\tif (username !== null) {\n\t\t\tif (!Accounts._loginButtons.validateUsername(username))\n\t\t\t\treturn;\n\t\t\telse\n\t\t\t\toptions.username = username;\n\t\t}\n\n\t\tvar email = trimmedElementValueById('login-email');\n\t\tif (email !== null) {\n\t\t\tif (!Accounts._loginButtons.validateEmail(email))\n\t\t\t\treturn;\n\t\t\telse\n\t\t\t\toptions.email = email;\n\t\t}\n\n\t\t// notably not trimmed. a password could (?) start or end with a space\n\t\tvar password = elementValueById('login-password');\n\t\tif (!Accounts._loginButtons.validatePassword(password))\n\t\t\treturn;\n\t\telse\n\t\t\toptions.password = password;\n\n\t\tif (!matchPasswordAgainIfPresent())\n\t\t\treturn;\n\n\t\t// prepare the profile object\n\t\toptions.profile = {};\n\n\t\t// define a proxy function to allow extraSignupFields set error messages\n\t\tvar errorFn = function(errorMessage) {\n\t\t\tAccounts._loginButtonsSession.errorMessage(errorMessage);\n\t\t};\n\n\t\tvar invalidExtraSignupFields = false;\n\n\t\t// parse extraSignupFields to populate account's profile data\n\t\t_.each(Accounts.ui._options.extraSignupFields, function(field, index) {\n\t\t\tvar value = elementValueById('login-' + field.fieldName);\n\t\t\tif (typeof field.validate === 'function') {\n\t\t\t\tif (field.validate(value, errorFn)) {\n\t\t\t\t\toptions.profile[field.fieldName] = elementValueById('login-' + field.fieldName);\n\t\t\t\t} else {\n\t\t\t\t\tinvalidExtraSignupFields = true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toptions.profile[field.fieldName] = elementValueById('login-' + field.fieldName);\n\t\t\t}\n\t\t});\n\n\t\tif (invalidExtraSignupFields)\n\t\t\treturn;\n\n\t\tAccounts.createUser(options, function(error) {\n\t\t\tif (error) {\n\t\t\t\tloginButtonsSession.errorMessage(error.reason || \"Unknown error\");\n\t\t\t} else {\n\t\t\t\tloginButtonsSession.closeDropdown();\n\t\t\t}\n\t\t});\n\t};\n\n\tvar forgotPassword = function() {\n\t\tloginButtonsSession.resetMessages();\n\n\t\tvar email = trimmedElementValueById(\"forgot-password-email\");\n\t\tif (email.indexOf('@') !== -1) {\n\t\t\tAccounts.forgotPassword({\n\t\t\t\temail: email\n\t\t\t}, function(error) {\n\t\t\t\tif (error)\n\t\t\t\t\tloginButtonsSession.errorMessage(error.reason || \"Unknown error\");\n\t\t\t\telse\n\t\t\t\t\tloginButtonsSession.infoMessage(\"Email sent\");\n\t\t\t});\n\t\t} else {\n\t\t\tloginButtonsSession.infoMessage(\"Email sent\");\n\t\t}\n\t};\n\n\tvar changePassword = function() {\n\t\tloginButtonsSession.resetMessages();\n\n\t\t// notably not trimmed. a password could (?) start or end with a space\n\t\tvar oldPassword = elementValueById('login-old-password');\n\n\t\t// notably not trimmed. a password could (?) start or end with a space\n\t\tvar password = elementValueById('login-password');\n\t\tif (!Accounts._loginButtons.validatePassword(password))\n\t\t\treturn;\n\n\t\tif (!matchPasswordAgainIfPresent())\n\t\t\treturn;\n\n\t\tAccounts.changePassword(oldPassword, password, function(error) {\n\t\t\tif (error) {\n\t\t\t\tloginButtonsSession.errorMessage(error.reason || \"Unknown error\");\n\t\t\t} else {\n\t\t\t\tloginButtonsSession.infoMessage(\"Password changed\");\n\n\t\t\t\t// wait 3 seconds, then expire the msg\n\t\t\t\tMeteor.setTimeout(function() {\n\t\t\t\t\tloginButtonsSession.resetMessages();\n\t\t\t\t}, 3000);\n\t\t\t}\n\t\t});\n\t};\n\n\tvar matchPasswordAgainIfPresent = function() {\n\t\t// notably not trimmed. a password could (?) start or end with a space\n\t\tvar passwordAgain = elementValueById('login-password-again');\n\t\tif (passwordAgain !== null) {\n\t\t\t// notably not trimmed. a password could (?) start or end with a space\n\t\t\tvar password = elementValueById('login-password');\n\t\t\tif (password !== passwordAgain) {\n\t\t\t\tloginButtonsSession.errorMessage(\"Passwords don't match\");\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t};\n})();\n","(function () {\n\t// for convenience\n\tvar loginButtonsSession = Accounts._loginButtonsSession;\n\n\n\t//\n\t// populate the session so that the appropriate dialogs are\n\t// displayed by reading variables set by accounts-urls, which parses\n\t// special URLs. since accounts-ui depends on accounts-urls, we are\n\t// guaranteed to have these set at this point.\n\t//\n\n\tif (Accounts._resetPasswordToken) {\n\t\tloginButtonsSession.set('resetPasswordToken', Accounts._resetPasswordToken);\n\t}\n\n\tif (Accounts._enrollAccountToken) {\n\t\tloginButtonsSession.set('enrollAccountToken', Accounts._enrollAccountToken);\n\t}\n\n\t// Needs to be in Meteor.startup because of a package loading order\n\t// issue. We can't be sure that accounts-password is loaded earlier\n\t// than accounts-ui so Accounts.verifyEmail might not be defined.\n\tMeteor.startup(function () {\n\t\tif (Accounts._verifyEmailToken) {\n\t\t\tAccounts.verifyEmail(Accounts._verifyEmailToken, function(error) {\n\t\t\t\tAccounts._enableAutoLogin();\n\t\t\t\tif (!error)\n\t\t\t\t\tloginButtonsSession.set('justVerifiedEmail', true);\n\t\t\t\t// XXX show something if there was an error.\n\t\t\t});\n\t\t}\n\t});\n\n\n\t//\n\t// resetPasswordDialog template\n\t//\n\tTemplate._resetPasswordDialog.rendered = function() {\n\t\tvar $modal = $(this.find('#login-buttons-reset-password-modal'));\n\t\t$modal.modal();\n\t}\n\n\tTemplate._resetPasswordDialog.events({\n\t\t'click #login-buttons-reset-password-button': function (event) {\n\t\t\tevent.stopPropagation();\n\t\t\tresetPassword();\n\t\t},\n\t\t'keypress #reset-password-new-password': function (event) {\n\t\t\tif (event.keyCode === 13)\n\t\t\t\tresetPassword();\n\t\t},\n\t\t'click #login-buttons-cancel-reset-password': function (event) {\n\t\t\tevent.stopPropagation();\n\t\t\tloginButtonsSession.set('resetPasswordToken', null);\n\t\t\tAccounts._enableAutoLogin();\n\t\t\t$('#login-buttons-reset-password-modal').modal(\"hide\");\n\t\t}\n\t});\n\n\tvar resetPassword = function () {\n\t\tloginButtonsSession.resetMessages();\n\t\tvar newPassword = document.getElementById('reset-password-new-password').value;\n\t\tif (!Accounts._loginButtons.validatePassword(newPassword))\n\t\t\treturn;\n\n\t\tAccounts.resetPassword(\n\t\t\tloginButtonsSession.get('resetPasswordToken'), newPassword,\n\t\t\tfunction (error) {\n\t\t\t\tif (error) {\n\t\t\t\t\tloginButtonsSession.errorMessage(error.reason || \"Unknown error\");\n\t\t\t\t} else {\n\t\t\t\t\tloginButtonsSession.set('resetPasswordToken', null);\n\t\t\t\t\tAccounts._enableAutoLogin();\n\t\t\t\t\t$('#login-buttons-reset-password-modal').modal(\"hide\");\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\tTemplate._resetPasswordDialog.inResetPasswordFlow = function () {\n\t\treturn loginButtonsSession.get('resetPasswordToken');\n\t};\n\n\n\t//\n\t// enrollAccountDialog template\n\t//\n\n\tTemplate._enrollAccountDialog.events({\n\t\t'click #login-buttons-enroll-account-button': function () {\n\t\t\tenrollAccount();\n\t\t},\n\t\t'keypress #enroll-account-password': function (event) {\n\t\t\tif (event.keyCode === 13)\n\t\t\t\tenrollAccount();\n\t\t},\n\t\t'click #login-buttons-cancel-enroll-account-button': function () {\n\t\t\tloginButtonsSession.set('enrollAccountToken', null);\n\t\t\tAccounts._enableAutoLogin();\n\t\t\t$modal.modal(\"hide\");\n\t\t}\n\t});\n\n\tTemplate._enrollAccountDialog.rendered = function() {\n\t\t$modal = $(this.find('#login-buttons-enroll-account-modal'));\n\t\t$modal.modal();\n\t};\n\n\tvar enrollAccount = function () {\n\t\tloginButtonsSession.resetMessages();\n\t\tvar password = document.getElementById('enroll-account-password').value;\n\t\tif (!Accounts._loginButtons.validatePassword(password))\n\t\t\treturn;\n\n\t\tAccounts.resetPassword(\n\t\t\tloginButtonsSession.get('enrollAccountToken'), password,\n\t\t\tfunction (error) {\n\t\t\t\tif (error) {\n\t\t\t\t\tloginButtonsSession.errorMessage(error.reason || \"Unknown error\");\n\t\t\t\t} else {\n\t\t\t\t\tloginButtonsSession.set('enrollAccountToken', null);\n\t\t\t\t\tAccounts._enableAutoLogin();\n\t\t\t\t\t$modal.modal(\"hide\");\n\t\t\t\t}\n\t\t\t});\n\t};\n\n\tTemplate._enrollAccountDialog.inEnrollAccountFlow = function () {\n\t\treturn loginButtonsSession.get('enrollAccountToken');\n\t};\n\n\n\t//\n\t// justVerifiedEmailDialog template\n\t//\n\n\tTemplate._justVerifiedEmailDialog.events({\n\t\t'click #just-verified-dismiss-button': function () {\n\t\t\tloginButtonsSession.set('justVerifiedEmail', false);\n\t\t}\n\t});\n\n\tTemplate._justVerifiedEmailDialog.visible = function () {\n\t\treturn loginButtonsSession.get('justVerifiedEmail');\n\t};\n\n\n\t//\n\t// loginButtonsMessagesDialog template\n\t//\n\n\t// Template._loginButtonsMessagesDialog.rendered = function() {\n\t//   var $modal = $(this.find('#configure-login-service-dialog-modal'));\n\t//   $modal.modal();\n\t// }\n\n\tTemplate._loginButtonsMessagesDialog.events({\n\t\t'click #messages-dialog-dismiss-button': function () {\n\t\t\tloginButtonsSession.resetMessages();\n\t\t}\n\t});\n\n\tTemplate._loginButtonsMessagesDialog.visible = function () {\n\t\tvar hasMessage = loginButtonsSession.get('infoMessage') || loginButtonsSession.get('errorMessage');\n\t\treturn !Accounts._loginButtons.dropdown() && hasMessage;\n\t};\n\n\n\t//\n\t// configureLoginServiceDialog template\n\t//\n\n\tTemplate._configureLoginServiceDialog.events({\n\t\t'click .configure-login-service-dismiss-button': function () {\n\t\t\tevent.stopPropagation();\n\t\t\tloginButtonsSession.set('configureLoginServiceDialogVisible', false);\n\t\t\t$('#configure-login-service-dialog-modal').modal('hide');\n\t\t},\n\t\t'click #configure-login-service-dialog-save-configuration': function () {\n\t\t\tif (loginButtonsSession.get('configureLoginServiceDialogVisible') &&\n\t\t\t\t\t! loginButtonsSession.get('configureLoginServiceDialogSaveDisabled')) {\n\t\t\t\t// Prepare the configuration document for this login service\n\t\t\t\tvar serviceName = loginButtonsSession.get('configureLoginServiceDialogServiceName');\n\t\t\t\tvar configuration = {\n\t\t\t\t\tservice: serviceName\n\t\t\t\t};\n\t\t\t\t_.each(configurationFields(), function(field) {\n\t\t\t\t\tconfiguration[field.property] = document.getElementById(\n\t\t\t\t\t\t'configure-login-service-dialog-' + field.property).value\n\t\t\t\t\t\t.replace(/^\\s*|\\s*$/g, \"\"); // trim;\n\t\t\t\t});\n\n\t\t\t\t// Configure this login service\n\t\t\t\tMeteor.call(\"configureLoginService\", configuration, function (error, result) {\n\t\t\t\t\tif (error)\n\t\t\t\t\t\tMeteor._debug(\"Error configuring login service \" + serviceName, error);\n\t\t\t\t\telse\n\t\t\t\t\t\tloginButtonsSession.set('configureLoginServiceDialogVisible', false);\n\t\t\t\t\t\t$('#configure-login-service-dialog-modal').modal('hide');\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\t// IE8 doesn't support the 'input' event, so we'll run this on the keyup as\n\t\t// well. (Keeping the 'input' event means that this also fires when you use\n\t\t// the mouse to change the contents of the field, eg 'Cut' menu item.)\n\t\t'input, keyup input': function (event) {\n\t\t\t// if the event fired on one of the configuration input fields,\n\t\t\t// check whether we should enable the 'save configuration' button\n\t\t\tif (event.target.id.indexOf('configure-login-service-dialog') === 0)\n\t\t\t\tupdateSaveDisabled();\n\t\t}\n\t});\n\n\t// check whether the 'save configuration' button should be enabled.\n\t// this is a really strange way to implement this and a Forms\n\t// Abstraction would make all of this reactive, and simpler.\n\tvar updateSaveDisabled = function () {\n\t\tvar anyFieldEmpty = _.any(configurationFields(), function(field) {\n\t\t\treturn document.getElementById(\n\t\t\t\t'configure-login-service-dialog-' + field.property).value === '';\n\t\t});\n\n\t\tloginButtonsSession.set('configureLoginServiceDialogSaveDisabled', anyFieldEmpty);\n\t};\n\n\t// Returns the appropriate template for this login service.  This\n\t// template should be defined in the service's package\n\tvar configureLoginServiceDialogTemplateForService = function () {\n\t\tvar serviceName = loginButtonsSession.get('configureLoginServiceDialogServiceName');\n\t\treturn Template['configureLoginServiceDialogFor' + capitalize(serviceName)];\n\t};\n\n\tvar configurationFields = function () {\n\t\tvar template = configureLoginServiceDialogTemplateForService();\n\t\treturn template.fields();\n\t};\n\n\tTemplate._configureLoginServiceDialog.configurationFields = function () {\n\t\treturn configurationFields();\n\t};\n\n\tTemplate._configureLoginServiceDialog.visible = function () {\n\t\treturn loginButtonsSession.get('configureLoginServiceDialogVisible');\n\t};\n\n\tTemplate._configureLoginServiceDialog.configurationSteps = function () {\n\t\t// renders the appropriate template\n\t\treturn configureLoginServiceDialogTemplateForService();\n\t};\n\n\tTemplate._configureLoginServiceDialog.saveDisabled = function () {\n\t\treturn loginButtonsSession.get('configureLoginServiceDialogSaveDisabled');\n\t};\n\n\n\t// XXX from http://epeli.github.com/underscore.string/lib/underscore.string.js\n\tvar capitalize = function(str){\n\t\tstr = str == null ? '' : String(str);\n\t\treturn str.charAt(0).toUpperCase() + str.slice(1);\n\t};\n\n}) ();\n"]}