)]}'
{"version":3,"file":"/packages/oauth.js","sources":["oauth/oauth_client.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,W;;AAEA,yD;AACA,E;AACA,oF;AACA,kC;AACA,mF;AACA,4E;AACA,W;AACA,uE;AACA,wD;AACA,qG;AACA,gE;AACA,gC;AACA,Q;AACA,4C;AACA,8C;;AAEA,+C;AACA,S;AACA,iF;AACA,sC;AACA,gE;AACA,mE;AACA,iB;AACA,mE;AACA,oE;AACA,qE;AACA,wB;AACA,a;AACA,K;;AAEA,sB;AACA,oC;AACA,yD;AACA,K;AACA,U;AACA,E;;;AAGA,sD;AACA,qD;AACA,6C;AACA,qD;AACA,4C;AACA,2D;AACA,wD;AACA,6D;AACA,iE;AACA,wB;;AAEA,oE;AACA,kE;AACA,gD;AACA,iD;AACA,0D;AACA,uE;;AAEA,sD;AACA,sB;AACA,sB;AACA,mB;AACA,E","sourcesContent":["Oauth = {};\n\n// Open a popup window pointing to a OAuth handshake page\n//\n// @param credentialToken {String} The OAuth credentialToken generated by the client\n// @param url {String} url to page\n// @param credentialRequestCompleteCallback {Function} Callback function to call on\n//   completion. Takes one argument, credentialToken on success, or Error on\n//   error.\n// @param dimensions {optional Object(width, height)} The dimensions of\n//   the popup. If not passed defaults to something sane\nOauth.initiateLogin = function(credentialToken, url, credentialRequestCompleteCallback, dimensions) {\n  // default dimensions that worked well for facebook and google\n  var popup = openCenteredPopup(\n    url,\n    (dimensions && dimensions.width) || 650,\n    (dimensions && dimensions.height) || 331);\n\n  var checkPopupOpen = setInterval(function() {\n    try {\n      // Fix for #328 - added a second test criteria (popup.closed === undefined)\n      // to humour this Android quirk:\n      // http://code.google.com/p/android/issues/detail?id=21061\n      var popupClosed = popup.closed || popup.closed === undefined;\n    } catch (e) {\n      // For some unknown reason, IE9 (and others?) sometimes (when\n      // the popup closes too quickly?) throws \"SCRIPT16386: No such\n      // interface supported\" when trying to read 'popup.closed'. Try\n      // again in 100ms.\n      return;\n    }\n\n    if (popupClosed) {\n      clearInterval(checkPopupOpen);\n      credentialRequestCompleteCallback(credentialToken);\n    }\n  }, 100);\n};\n\n\nvar openCenteredPopup = function(url, width, height) {\n  var screenX = typeof window.screenX !== 'undefined'\n        ? window.screenX : window.screenLeft;\n  var screenY = typeof window.screenY !== 'undefined'\n        ? window.screenY : window.screenTop;\n  var outerWidth = typeof window.outerWidth !== 'undefined'\n        ? window.outerWidth : document.body.clientWidth;\n  var outerHeight = typeof window.outerHeight !== 'undefined'\n        ? window.outerHeight : (document.body.clientHeight - 22);\n  // XXX what is the 22?\n\n  // Use `outerWidth - width` and `outerHeight - height` for help in\n  // positioning the popup centered relative to the current window\n  var left = screenX + (outerWidth - width) / 2;\n  var top = screenY + (outerHeight - height) / 2;\n  var features = ('width=' + width + ',height=' + height +\n                  ',left=' + left + ',top=' + top + ',scrollbars=yes');\n\n  var newwindow = window.open(url, 'Login', features);\n  if (newwindow.focus)\n    newwindow.focus();\n  return newwindow;\n};\n"]}